{"version":3,"file":"index.js","sources":["../src/types/public-types.ts","../src/helpers/date-helper.ts","../src/components/task-list/task-list-header.tsx","../src/components/task-list/task-list-table.tsx","../src/components/other/tooltip.tsx","../src/components/other/vertical-scroll.tsx","../src/components/task-list/task-list.tsx","../src/helpers/bar-helper.ts","../src/components/grid/grid-body.tsx","../src/components/grid/grid.tsx","../src/components/calendar/top-part-of-calendar.tsx","../src/components/calendar/calendar.tsx","../node_modules/babel-plugin-transform-async-to-promises/helpers.mjs","../src/components/other/arrow.tsx","../src/helpers/other-helper.ts","../src/components/task-item/bar/bar-display.tsx","../src/components/task-item/bar/bar.tsx","../src/components/task-item/bar/bar-progress-handle.tsx","../src/components/task-item/bar/bar-small.tsx","../src/components/task-item/milestone/milestone.tsx","../src/components/task-item/project/project.tsx","../src/components/task-item/task-item.tsx","../src/components/gantt/task-gantt-content.tsx","../src/components/gantt/task-gantt.tsx","../src/components/other/horizontal-scroll.tsx","../src/components/gantt/gantt.tsx"],"sourcesContent":["export enum ViewMode {\r\n  Hour = \"Hour\",\r\n  QuarterDay = \"Quarter Day\",\r\n  HalfDay = \"Half Day\",\r\n  Day = \"Day\",\r\n  /** ISO-8601 week */\r\n  Week = \"Week\",\r\n  Month = \"Month\",\r\n}\r\nexport type TaskType = \"task\" | \"milestone\" | \"project\";\r\nexport type PeriodeType =\r\n  | \"PregnancyLeave\"\r\n  | \"PaternityLeave\"\r\n  | \"MaternityLeave\"\r\n  | \"Leave\"\r\n  | \"EarMarkedLeave\"\r\n  | \"Vacation\"\r\n  | \"Other\";\r\nexport interface Task {\r\n  onEdit: (task: Task) => void;\r\n  taskTitle: string;\r\n  taskDescription: string;\r\n  periodeType: PeriodeType;\r\n  id: string;\r\n  type: TaskType;\r\n  name: string;\r\n  start: Date;\r\n  end: Date;\r\n  /**\r\n   * From 0 to 100\r\n   */\r\n  progress: number;\r\n  styles?: {\r\n    backgroundColor?: string;\r\n    backgroundSelectedColor?: string;\r\n    progressColor?: string;\r\n    progressSelectedColor?: string;\r\n  };\r\n  // HANDOVER TODO: here i added the types for number of days\r\n  motherIndividualDays: number;\r\n  partnerIndividualDays: number;\r\n  sharedDays: number;\r\n  isDisabled?: boolean;\r\n  project?: string;\r\n  rowIndex: number;\r\n  extendedTask?: boolean;\r\n  dependencies?: string[];\r\n  hideChildren?: boolean;\r\n  displayOrder?: number;\r\n}\r\n\r\nexport interface EventOption {\r\n  /**\r\n   * Time step value for date changes.\r\n   */\r\n  timeStep?: number;\r\n  /**\r\n   * Invokes on bar select on unselect.\r\n   */\r\n  onSelect?: (task: Task, isSelected: boolean) => void;\r\n  /**\r\n   * Invokes on bar double click.\r\n   */\r\n  onDoubleClick?: (task: Task) => void;\r\n  /**\r\n   * Invokes on end and start time change. Chart undoes operation if method return false or error.\r\n   */\r\n  onDateChange?: (\r\n    task: Task,\r\n    children: Task[]\r\n  ) => void | boolean | Promise<void> | Promise<boolean>;\r\n  /**\r\n   * Invokes on progress change. Chart undoes operation if method return false or error.\r\n   */\r\n  onProgressChange?: (\r\n    task: Task,\r\n    children: Task[]\r\n  ) => void | boolean | Promise<void> | Promise<boolean>;\r\n  /**\r\n   * Invokes on delete selected task. Chart undoes operation if method return false or error.\r\n   */\r\n  onDelete?: (task: Task) => void | boolean | Promise<void> | Promise<boolean>;\r\n  /**\r\n   * Invokes on expander on task list\r\n   */\r\n  onExpanderClick?: (task: Task) => void;\r\n}\r\n\r\nexport interface DisplayOption {\r\n  viewMode?: ViewMode;\r\n  viewDate?: Date;\r\n  /**\r\n   * Specifies the month name language. Able formats: ISO 639-2, Java Locale\r\n   */\r\n  locale?: string;\r\n  rtl?: boolean;\r\n}\r\n\r\nexport interface StylingOption {\r\n  headerHeight?: number;\r\n  columnWidth?: number;\r\n  listCellWidth?: string;\r\n  rowHeight?: number;\r\n  ganttHeight?: number;\r\n  barCornerRadius?: number;\r\n  handleWidth?: number;\r\n  fontFamily?: string;\r\n  fontSize?: string;\r\n  /**\r\n   * How many of row width can be taken by task.\r\n   * From 0 to 100\r\n   */\r\n  barFill?: number;\r\n  barProgressColor?: string;\r\n  barProgressSelectedColor?: string;\r\n  barBackgroundColor?: string;\r\n  barBackgroundSelectedColor?: string;\r\n  projectProgressColor?: string;\r\n  projectProgressSelectedColor?: string;\r\n  projectBackgroundColor?: string;\r\n  projectBackgroundSelectedColor?: string;\r\n  milestoneBackgroundColor?: string;\r\n  milestoneBackgroundSelectedColor?: string;\r\n  arrowColor?: string;\r\n  arrowIndent?: number;\r\n  todayColor?: string;\r\n  TooltipContent?: React.FC<{\r\n    task: Task;\r\n    fontSize: string;\r\n    fontFamily: string;\r\n  }>;\r\n  TaskListHeader?: React.FC<{\r\n    headerHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n  }>;\r\n  TaskListTable?: React.FC<{\r\n    rowHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n    locale: string;\r\n    tasks: Task[];\r\n    selectedTaskId: string;\r\n    /**\r\n     * Sets selected task by id\r\n     */\r\n    setSelectedTask: (taskId: string) => void;\r\n    onExpanderClick: (task: Task) => void;\r\n  }>;\r\n}\r\n\r\nexport interface GanttProps extends EventOption, DisplayOption, StylingOption {\r\n  tasks: Task[];\r\n}\r\n","import { Task, ViewMode } from \"../types/public-types\";\r\nimport DateTimeFormatOptions = Intl.DateTimeFormatOptions;\r\nimport DateTimeFormat = Intl.DateTimeFormat;\r\n\r\ntype DateHelperScales =\r\n  | \"year\"\r\n  | \"month\"\r\n  | \"day\"\r\n  | \"hour\"\r\n  | \"minute\"\r\n  | \"second\"\r\n  | \"millisecond\";\r\n\r\nconst intlDTCache = {};\r\nexport const getCachedDateTimeFormat = (\r\n  locString: string | string[],\r\n  opts: DateTimeFormatOptions = {}\r\n): DateTimeFormat => {\r\n  const key = JSON.stringify([locString, opts]);\r\n  let dtf = intlDTCache[key];\r\n  if (!dtf) {\r\n    dtf = new Intl.DateTimeFormat(locString, opts);\r\n    intlDTCache[key] = dtf;\r\n  }\r\n  return dtf;\r\n};\r\n\r\nexport const addToDate = (\r\n  date: Date,\r\n  quantity: number,\r\n  scale: DateHelperScales\r\n) => {\r\n  const newDate = new Date(\r\n    date.getFullYear() + (scale === \"year\" ? quantity : 0),\r\n    date.getMonth() + (scale === \"month\" ? quantity : 0),\r\n    date.getDate() + (scale === \"day\" ? quantity : 0),\r\n    date.getHours() + (scale === \"hour\" ? quantity : 0),\r\n    date.getMinutes() + (scale === \"minute\" ? quantity : 0),\r\n    date.getSeconds() + (scale === \"second\" ? quantity : 0),\r\n    date.getMilliseconds() + (scale === \"millisecond\" ? quantity : 0)\r\n  );\r\n  if (scale === \"year\") {\r\n    console.log(date.getFullYear() + quantity, newDate.getFullYear());\r\n  }\r\n  return newDate;\r\n};\r\n\r\nexport const startOfDate = (date: Date, scale: DateHelperScales) => {\r\n  const scores = [\r\n    \"millisecond\",\r\n    \"second\",\r\n    \"minute\",\r\n    \"hour\",\r\n    \"day\",\r\n    \"month\",\r\n    \"year\",\r\n  ];\r\n\r\n  const shouldReset = (_scale: DateHelperScales) => {\r\n    const maxScore = scores.indexOf(scale);\r\n    return scores.indexOf(_scale) <= maxScore;\r\n  };\r\n  const newDate = new Date(\r\n    date.getFullYear(),\r\n    shouldReset(\"year\") ? 0 : date.getMonth(),\r\n    shouldReset(\"month\") ? 1 : date.getDate(),\r\n    shouldReset(\"day\") ? 0 : date.getHours(),\r\n    shouldReset(\"hour\") ? 0 : date.getMinutes(),\r\n    shouldReset(\"minute\") ? 0 : date.getSeconds(),\r\n    shouldReset(\"second\") ? 0 : date.getMilliseconds()\r\n  );\r\n  return newDate;\r\n};\r\n\r\nexport const ganttDateRange = (tasks: Task[], viewMode: ViewMode) => {\r\n  let newStartDate: Date = tasks[0].start;\r\n  let newEndDate: Date = tasks[0].start;\r\n  for (const task of tasks) {\r\n    if (task.start < newStartDate) {\r\n      newStartDate = task.start;\r\n    }\r\n    if (task.end > newEndDate) {\r\n      newEndDate = task.end;\r\n    }\r\n  }\r\n  switch (viewMode) {\r\n    case ViewMode.Month:\r\n      // TODO: Here i changed the logic to get the displaing months\r\n      newStartDate = addToDate(newStartDate, 0, \"month\");\r\n      newStartDate = startOfDate(newStartDate, \"month\");\r\n      newEndDate = addToDate(newStartDate, 12, \"month\");\r\n      newEndDate = startOfDate(newEndDate, \"month\");\r\n      break;\r\n    case ViewMode.Week:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newStartDate = addToDate(getMonday(newStartDate), -7, \"day\");\r\n      newEndDate = addToDate(newEndDate, 1.5, \"month\");\r\n      break;\r\n    case ViewMode.Day:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -1, \"day\");\r\n      newEndDate = addToDate(newEndDate, 19, \"day\");\r\n      break;\r\n    case ViewMode.QuarterDay:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -1, \"day\");\r\n      newEndDate = addToDate(newEndDate, 66, \"hour\"); // 24(1 day)*3 - 6\r\n      break;\r\n    case ViewMode.HalfDay:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -1, \"day\");\r\n      newEndDate = addToDate(newEndDate, 108, \"hour\"); // 24(1 day)*5 - 12\r\n      break;\r\n    case ViewMode.Hour:\r\n      newStartDate = startOfDate(newStartDate, \"hour\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -1, \"hour\");\r\n      newEndDate = addToDate(newEndDate, 1, \"day\");\r\n      break;\r\n  }\r\n  return [newStartDate, newEndDate];\r\n};\r\n\r\nexport const seedDates = (\r\n  startDate: Date,\r\n  endDate: Date,\r\n  viewMode: ViewMode\r\n) => {\r\n  let currentDate: Date = new Date(startDate);\r\n  const dates: Date[] = [currentDate];\r\n  while (currentDate < endDate) {\r\n    switch (viewMode) {\r\n      case ViewMode.Month:\r\n        currentDate = addToDate(currentDate, 1, \"month\");\r\n        break;\r\n      case ViewMode.Week:\r\n        currentDate = addToDate(currentDate, 7, \"day\");\r\n        break;\r\n      case ViewMode.Day:\r\n        currentDate = addToDate(currentDate, 1, \"day\");\r\n        break;\r\n      case ViewMode.HalfDay:\r\n        currentDate = addToDate(currentDate, 12, \"hour\");\r\n        break;\r\n      case ViewMode.QuarterDay:\r\n        currentDate = addToDate(currentDate, 6, \"hour\");\r\n        break;\r\n      case ViewMode.Hour:\r\n        currentDate = addToDate(currentDate, 1, \"hour\");\r\n        break;\r\n    }\r\n    dates.push(currentDate);\r\n  }\r\n  return dates;\r\n};\r\n\r\nexport const getLocaleMonth = (date: Date, locale: string) => {\r\n  let bottomValue = getCachedDateTimeFormat(locale, {\r\n    // TODO: Here you change the month format\r\n    month: \"short\",\r\n  }).format(date);\r\n  bottomValue = bottomValue.replace(\r\n    bottomValue[0],\r\n    bottomValue[0].toLocaleUpperCase()\r\n  );\r\n  return bottomValue;\r\n};\r\n\r\nexport const getLocalDayOfWeek = (\r\n  date: Date,\r\n  locale: string,\r\n  format?: \"long\" | \"short\" | \"narrow\" | undefined\r\n) => {\r\n  let bottomValue = getCachedDateTimeFormat(locale, {\r\n    weekday: format,\r\n  }).format(date);\r\n  bottomValue = bottomValue.replace(\r\n    bottomValue[0],\r\n    bottomValue[0].toLocaleUpperCase()\r\n  );\r\n  return bottomValue;\r\n};\r\n\r\n/**\r\n * Returns monday of current week\r\n * @param date date for modify\r\n */\r\nconst getMonday = (date: Date) => {\r\n  const day = date.getDay();\r\n  const diff = date.getDate() - day + (day === 0 ? -6 : 1); // adjust when day is sunday\r\n  return new Date(date.setDate(diff));\r\n};\r\n\r\nexport const getWeekNumberISO8601 = (date: Date) => {\r\n  const tmpDate = new Date(date.valueOf());\r\n  const dayNumber = (tmpDate.getDay() + 6) % 7;\r\n  tmpDate.setDate(tmpDate.getDate() - dayNumber + 3);\r\n  const firstThursday = tmpDate.valueOf();\r\n  tmpDate.setMonth(0, 1);\r\n  if (tmpDate.getDay() !== 4) {\r\n    tmpDate.setMonth(0, 1 + ((4 - tmpDate.getDay() + 7) % 7));\r\n  }\r\n  const weekNumber = (\r\n    1 + Math.ceil((firstThursday - tmpDate.valueOf()) / 604800000)\r\n  ).toString();\r\n\r\n  if (weekNumber.length === 1) {\r\n    return `0${weekNumber}`;\r\n  } else {\r\n    return weekNumber;\r\n  }\r\n};\r\n\r\nexport const getDaysInMonth = (month: number, year: number) => {\r\n  return new Date(year, month + 1, 0).getDate();\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./task-list-header.module.css\";\r\n\r\nexport const TaskListHeaderDefault: React.FC<{\r\n  headerHeight: number;\r\n  rowWidth: string;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n}> = ({ headerHeight, fontFamily, fontSize, rowWidth }) => {\r\n  return (\r\n    <div\r\n      className={styles.ganttTable}\r\n      style={{\r\n        fontFamily: fontFamily,\r\n        fontSize: fontSize,\r\n      }}\r\n    >\r\n      <div\r\n        className={styles.ganttTable_Header}\r\n        style={{\r\n          height: headerHeight - 2,\r\n        }}\r\n      >\r\n        <div\r\n          className={styles.ganttTable_HeaderItem}\r\n          style={{\r\n            minWidth: rowWidth,\r\n          }}\r\n        >\r\n          &nbsp;Name\r\n        </div>\r\n        <div\r\n          className={styles.ganttTable_HeaderSeparator}\r\n          style={{\r\n            height: headerHeight * 0.5,\r\n            marginTop: headerHeight * 0.2,\r\n          }}\r\n        />\r\n        <div\r\n          className={styles.ganttTable_HeaderItem}\r\n          style={{\r\n            minWidth: rowWidth,\r\n          }}\r\n        >\r\n          &nbsp;From\r\n        </div>\r\n        <div\r\n          className={styles.ganttTable_HeaderSeparator}\r\n          style={{\r\n            height: headerHeight * 0.5,\r\n            marginTop: headerHeight * 0.25,\r\n          }}\r\n        />\r\n        <div\r\n          className={styles.ganttTable_HeaderItem}\r\n          style={{\r\n            minWidth: rowWidth,\r\n          }}\r\n        >\r\n          &nbsp;To\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useMemo } from \"react\";\r\nimport styles from \"./task-list-table.module.css\";\r\nimport { Task } from \"../../types/public-types\";\r\n\r\nconst localeDateStringCache = {};\r\nconst toLocaleDateStringFactory =\r\n  (locale: string) =>\r\n  (date: Date, dateTimeOptions: Intl.DateTimeFormatOptions) => {\r\n    const key = date.toString();\r\n    let lds = localeDateStringCache[key];\r\n    if (!lds) {\r\n      lds = date.toLocaleDateString(locale, dateTimeOptions);\r\n      localeDateStringCache[key] = lds;\r\n    }\r\n    return lds;\r\n  };\r\nconst dateTimeOptions: Intl.DateTimeFormatOptions = {\r\n  weekday: \"short\",\r\n  year: \"numeric\",\r\n  month: \"long\",\r\n  day: \"numeric\",\r\n};\r\n\r\nexport const TaskListTableDefault: React.FC<{\r\n  rowHeight: number;\r\n  rowWidth: string;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n  locale: string;\r\n  tasks: Task[];\r\n  selectedTaskId: string;\r\n  setSelectedTask: (taskId: string) => void;\r\n  onExpanderClick: (task: Task) => void;\r\n}> = ({\r\n  rowHeight,\r\n  rowWidth,\r\n  tasks,\r\n  fontFamily,\r\n  fontSize,\r\n  locale,\r\n  onExpanderClick,\r\n}) => {\r\n  const toLocaleDateString = useMemo(\r\n    () => toLocaleDateStringFactory(locale),\r\n    [locale]\r\n  );\r\n\r\n  return (\r\n    <div\r\n      className={styles.taskListWrapper}\r\n      style={{\r\n        fontFamily: fontFamily,\r\n        fontSize: fontSize,\r\n      }}\r\n    >\r\n      {tasks.map(t => {\r\n        let expanderSymbol = \"\";\r\n        if (t.hideChildren === false) {\r\n          expanderSymbol = \"▼\";\r\n        } else if (t.hideChildren === true) {\r\n          expanderSymbol = \"▶\";\r\n        }\r\n\r\n        return (\r\n          <div\r\n            className={styles.taskListTableRow}\r\n            style={{ height: rowHeight }}\r\n            key={`${t.id}row`}\r\n          >\r\n            <div\r\n              className={styles.taskListCell}\r\n              style={{\r\n                minWidth: rowWidth,\r\n                maxWidth: rowWidth,\r\n              }}\r\n              title={t.name}\r\n            >\r\n              <div className={styles.taskListNameWrapper}>\r\n                <div\r\n                  className={\r\n                    expanderSymbol\r\n                      ? styles.taskListExpander\r\n                      : styles.taskListEmptyExpander\r\n                  }\r\n                  onClick={() => onExpanderClick(t)}\r\n                >\r\n                  {expanderSymbol}\r\n                </div>\r\n                <div>{t.name}</div>\r\n              </div>\r\n            </div>\r\n            <div\r\n              className={styles.taskListCell}\r\n              style={{\r\n                minWidth: rowWidth,\r\n                maxWidth: rowWidth,\r\n              }}\r\n            >\r\n              &nbsp;{toLocaleDateString(t.start, dateTimeOptions)}\r\n            </div>\r\n            <div\r\n              className={styles.taskListCell}\r\n              style={{\r\n                minWidth: rowWidth,\r\n                maxWidth: rowWidth,\r\n              }}\r\n            >\r\n              &nbsp;{toLocaleDateString(t.end, dateTimeOptions)}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport { Task } from \"../../types/public-types\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport styles from \"./tooltip.module.css\";\r\n\r\nexport type TooltipProps = {\r\n  closeTooltip: () => void;\r\n  task: BarTask;\r\n  arrowIndent: number;\r\n  rtl: boolean;\r\n  svgContainerHeight: number;\r\n  svgContainerWidth: number;\r\n  svgWidth: number;\r\n  headerHeight: number;\r\n  taskListWidth: number;\r\n  scrollX: number;\r\n  scrollY: number;\r\n  rowHeight: number;\r\n  fontSize: string;\r\n  fontFamily: string;\r\n  TooltipContent: React.FC<{\r\n    close: () => void;\r\n    task: Task;\r\n    fontSize: string;\r\n    fontFamily: string;\r\n  }>;\r\n};\r\nexport const Tooltip: React.FC<TooltipProps> = ({\r\n  closeTooltip,\r\n  task,\r\n  rowHeight,\r\n  rtl,\r\n  svgContainerHeight,\r\n  svgContainerWidth,\r\n  scrollX,\r\n  scrollY,\r\n  arrowIndent,\r\n  fontSize,\r\n  fontFamily,\r\n  headerHeight,\r\n  taskListWidth,\r\n  TooltipContent,\r\n}) => {\r\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\r\n  const [relatedY, setRelatedY] = useState(0);\r\n  const [relatedX, setRelatedX] = useState(0);\r\n  useEffect(() => {\r\n    if (tooltipRef.current) {\r\n      const tooltipHeight = tooltipRef.current.offsetHeight * 1.1;\r\n      const tooltipWidth = tooltipRef.current.offsetWidth * 1.1;\r\n      let newRelatedY;\r\n      if (task.project === \"mother\") {\r\n        // newRelatedY = 1 * rowHeight + 30 - scrollY + headerHeight;\r\n        newRelatedY = 1 * rowHeight + 30 - scrollY;\r\n      } else if (task.project === \"partner\") {\r\n        newRelatedY = 2 * rowHeight + 30 - scrollY;\r\n      } else {\r\n        newRelatedY = task.index * rowHeight - scrollY + headerHeight;\r\n      }\r\n      let newRelatedX: number;\r\n      if (rtl) {\r\n        newRelatedX = task.x1 - arrowIndent * 1.5 - tooltipWidth - scrollX;\r\n        if (newRelatedX < 0) {\r\n          newRelatedX = task.x2 + arrowIndent * 1.5 - scrollX;\r\n        }\r\n        const tooltipLeftmostPoint = tooltipWidth + newRelatedX;\r\n        if (tooltipLeftmostPoint > svgContainerWidth) {\r\n          newRelatedX = svgContainerWidth - tooltipWidth;\r\n          newRelatedY += rowHeight;\r\n        }\r\n      } else {\r\n        newRelatedX = task.x1;\r\n        const tooltipLeftmostPoint = tooltipWidth + newRelatedX;\r\n        const fullChartWidth = taskListWidth + svgContainerWidth;\r\n        if (tooltipLeftmostPoint > fullChartWidth) {\r\n          newRelatedX = task.x1;\r\n        }\r\n        if (newRelatedX < taskListWidth) {\r\n          newRelatedX = svgContainerWidth + taskListWidth - tooltipWidth;\r\n          newRelatedY += rowHeight;\r\n        }\r\n      }\r\n\r\n      const tooltipLowerPoint = tooltipHeight + newRelatedY - scrollY;\r\n      if (tooltipLowerPoint > svgContainerHeight - scrollY) {\r\n        newRelatedY = svgContainerHeight - tooltipHeight;\r\n      }\r\n      setRelatedY(newRelatedY);\r\n      setRelatedX(newRelatedX);\r\n    }\r\n  }, [\r\n    tooltipRef.current,\r\n    task,\r\n    arrowIndent,\r\n    scrollX,\r\n    scrollY,\r\n    headerHeight,\r\n    taskListWidth,\r\n    rowHeight,\r\n    svgContainerHeight,\r\n    svgContainerWidth,\r\n  ]);\r\n  const handleClose = () => {\r\n    closeTooltip();\r\n  };\r\n  return (\r\n    <div\r\n      ref={tooltipRef}\r\n      className={\r\n        relatedX\r\n          ? styles.tooltipDetailsContainer\r\n          : styles.tooltipDetailsContainerHidden\r\n      }\r\n      style={{ left: relatedX - 70, top: relatedY }}\r\n    >\r\n      <TooltipContent\r\n        task={task}\r\n        fontSize={fontSize}\r\n        fontFamily={fontFamily}\r\n        close={handleClose}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const StandardTooltipContent: React.FC<{\r\n  task: Task;\r\n  fontSize: string;\r\n  fontFamily: string;\r\n  close: () => void;\r\n}> = ({ task, fontSize, fontFamily, close }) => {\r\n  const style = {\r\n    fontSize,\r\n    fontFamily,\r\n  };\r\n  const monthName = new Intl.DateTimeFormat(\"da-DA\", { month: \"long\" }).format;\r\n  const handleClose = () => {\r\n    close();\r\n  };\r\n  const handleEdit = () => {\r\n    task.onEdit(task);\r\n    close();\r\n  };\r\n  return (\r\n    <div className={styles.tooltipDefaultContainer} style={style}>\r\n      <div className={styles.tooltipArrow} />\r\n      <p className={styles.tooltipTitle}>{task.taskTitle}</p>\r\n      <b\r\n        className={styles.tooltipDate}\r\n        style={{ fontSize: fontSize + 6 }}\r\n      >{`${task.start.getDate()}  \r\n      ${monthName(task.start)} \r\n      ${task.start.getFullYear()} - ${task.end.getDate()} ${monthName(\r\n        task.end\r\n      )} ${task.end.getFullYear()}`}</b>\r\n      <p className={styles.tooltipDescription}>{task.taskDescription}</p>\r\n      <button\r\n        onClick={() => handleEdit()}\r\n        className={styles.tooltipEditContainer}\r\n        disabled={\r\n          task.periodeType !== \"Leave\" && task.periodeType !== \"PaternityLeave\"\r\n        }\r\n      >\r\n        <svg\r\n          width=\"17\"\r\n          height=\"17\"\r\n          viewBox=\"0 0 17 17\"\r\n          fill={\r\n            task.periodeType !== \"Leave\" &&\r\n            task.periodeType !== \"PaternityLeave\"\r\n              ? \"#D0D0D0\"\r\n              : \"#284D62\"\r\n          }\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <path d=\"M10.4441 5.68556L11.3129 6.55444L2.7574 15.1111H1.88863V14.2422L10.4441 5.68556ZM13.8436 0C13.6076 0 13.362 0.0944444 13.1826 0.273889L11.4545 2.00222L14.9957 5.54389L16.7238 3.81556C17.0921 3.44722 17.0921 2.85222 16.7238 2.48389L14.5141 0.273889C14.3252 0.085 14.0892 0 13.8436 0ZM10.4441 3.01278L0 13.4583V17H3.54118L13.9853 6.55444L10.4441 3.01278Z\" />\r\n        </svg>\r\n        <span className={styles.tooltipEditText}>Rediger</span>\r\n      </button>\r\n      <div className={styles.closeButton} onClick={() => handleClose()}>\r\n        <svg\r\n          width=\"30\"\r\n          height=\"30\"\r\n          viewBox=\"0 0 30 30\"\r\n          fill=\"none\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <circle cx=\"15\" cy=\"15\" r=\"15\" fill=\"white\" />\r\n          <line\r\n            x1=\"9.69683\"\r\n            y1=\"9.46998\"\r\n            x2=\"20.492\"\r\n            y2=\"20.2651\"\r\n            stroke=\"#0B2432\"\r\n            strokeWidth=\"1.5\"\r\n          />\r\n          <line\r\n            x1=\"9.50824\"\r\n            y1=\"20.2648\"\r\n            x2=\"20.3034\"\r\n            y2=\"9.46971\"\r\n            stroke=\"#0B2432\"\r\n            strokeWidth=\"1.5\"\r\n          />\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { SyntheticEvent, useRef, useEffect } from \"react\";\r\nimport styles from \"./vertical-scroll.module.css\";\r\n\r\nexport const VerticalScroll: React.FC<{\r\n  scroll: number;\r\n  ganttHeight: number;\r\n  ganttFullHeight: number;\r\n  headerHeight: number;\r\n  rtl: boolean;\r\n  onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\r\n}> = ({\r\n  scroll,\r\n  ganttHeight,\r\n  ganttFullHeight,\r\n  headerHeight,\r\n  rtl,\r\n  onScroll,\r\n}) => {\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollTop = scroll;\r\n    }\r\n  }, [scroll]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        height: ganttHeight,\r\n        marginTop: headerHeight,\r\n        marginLeft: rtl ? \"\" : \"-17px\",\r\n      }}\r\n      className={styles.scroll}\r\n      onScroll={onScroll}\r\n      ref={scrollRef}\r\n    >\r\n      <div style={{ height: ganttFullHeight, width: 1 }} />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { Task } from \"../../types/public-types\";\r\n\r\nexport type TaskListProps = {\r\n  headerHeight: number;\r\n  rowWidth: string;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n  rowHeight: number;\r\n  ganttHeight: number;\r\n  scrollY: number;\r\n  locale: string;\r\n  tasks: Task[];\r\n  taskListRef: React.RefObject<HTMLDivElement>;\r\n  horizontalContainerClass?: string;\r\n  selectedTask: BarTask | undefined;\r\n  setSelectedTask: (task: string) => void;\r\n  onExpanderClick: (task: Task) => void;\r\n  TaskListHeader: React.FC<{\r\n    headerHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n  }>;\r\n  TaskListTable: React.FC<{\r\n    rowHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n    locale: string;\r\n    tasks: Task[];\r\n    selectedTaskId: string;\r\n    setSelectedTask: (taskId: string) => void;\r\n    onExpanderClick: (task: Task) => void;\r\n  }>;\r\n};\r\n\r\nexport const TaskList: React.FC<TaskListProps> = ({\r\n  headerHeight,\r\n  fontFamily,\r\n  fontSize,\r\n  rowWidth,\r\n  rowHeight,\r\n  scrollY,\r\n  tasks,\r\n  selectedTask,\r\n  setSelectedTask,\r\n  onExpanderClick,\r\n  locale,\r\n  ganttHeight,\r\n  taskListRef,\r\n  horizontalContainerClass,\r\n  TaskListHeader,\r\n  TaskListTable,\r\n}) => {\r\n  const horizontalContainerRef = useRef<HTMLDivElement>(null);\r\n  useEffect(() => {\r\n    if (horizontalContainerRef.current) {\r\n      horizontalContainerRef.current.scrollTop = scrollY;\r\n    }\r\n  }, [scrollY]);\r\n\r\n  const headerProps = {\r\n    headerHeight,\r\n    fontFamily,\r\n    fontSize,\r\n    rowWidth,\r\n  };\r\n  const selectedTaskId = selectedTask ? selectedTask.id : \"\";\r\n  const tableProps = {\r\n    rowHeight,\r\n    rowWidth,\r\n    fontFamily,\r\n    fontSize,\r\n    tasks,\r\n    locale,\r\n    selectedTaskId: selectedTaskId,\r\n    setSelectedTask,\r\n    onExpanderClick,\r\n  };\r\n\r\n  return (\r\n    <div ref={taskListRef}>\r\n      <TaskListHeader {...headerProps} />\r\n      <div\r\n        ref={horizontalContainerRef}\r\n        className={horizontalContainerClass}\r\n        style={ganttHeight ? { height: ganttHeight } : {}}\r\n      >\r\n        <TaskListTable {...tableProps} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import { Task } from \"../types/public-types\";\r\nimport { BarTask, TaskTypeInternal } from \"../types/bar-task\";\r\nimport { BarMoveAction } from \"../types/gantt-task-actions\";\r\n\r\nexport const convertToBarTasks = (\r\n  tasks: Task[],\r\n  dates: Date[],\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  rtl: boolean,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string,\r\n  projectProgressColor: string,\r\n  projectProgressSelectedColor: string,\r\n  projectBackgroundColor: string,\r\n  projectBackgroundSelectedColor: string,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string\r\n) => {\r\n  const dateDelta =\r\n    dates[1].getTime() -\r\n    dates[0].getTime() -\r\n    dates[1].getTimezoneOffset() * 60 * 1000 +\r\n    dates[0].getTimezoneOffset() * 60 * 1000;\r\n  let barTasks = tasks.map((t, i) => {\r\n    return convertToBarTask(\r\n      t,\r\n      i,\r\n      dates,\r\n      dateDelta,\r\n      columnWidth,\r\n      rowHeight,\r\n      taskHeight,\r\n      barCornerRadius,\r\n      handleWidth,\r\n      rtl,\r\n      barProgressColor,\r\n      barProgressSelectedColor,\r\n      barBackgroundColor,\r\n      barBackgroundSelectedColor,\r\n      projectProgressColor,\r\n      projectProgressSelectedColor,\r\n      projectBackgroundColor,\r\n      projectBackgroundSelectedColor,\r\n      milestoneBackgroundColor,\r\n      milestoneBackgroundSelectedColor\r\n    );\r\n  });\r\n\r\n  // set dependencies\r\n  barTasks = barTasks.map(task => {\r\n    const dependencies = task.dependencies || [];\r\n    for (let j = 0; j < dependencies.length; j++) {\r\n      const dependence = barTasks.findIndex(\r\n        value => value.id === dependencies[j]\r\n      );\r\n      if (dependence !== -1) barTasks[dependence].barChildren.push(task);\r\n    }\r\n    return task;\r\n  });\r\n\r\n  return barTasks;\r\n};\r\n\r\nconst convertToBarTask = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  dateDelta: number,\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  rtl: boolean,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string,\r\n  projectProgressColor: string,\r\n  projectProgressSelectedColor: string,\r\n  projectBackgroundColor: string,\r\n  projectBackgroundSelectedColor: string,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string\r\n): BarTask => {\r\n  let barTask: BarTask;\r\n  switch (task.type) {\r\n    case \"milestone\":\r\n      barTask = convertToMilestone(\r\n        task,\r\n        index,\r\n        dates,\r\n        dateDelta,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        milestoneBackgroundColor,\r\n        milestoneBackgroundSelectedColor\r\n      );\r\n      break;\r\n    case \"project\":\r\n      barTask = convertToBar(\r\n        task,\r\n        index,\r\n        dates,\r\n        dateDelta,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        rtl,\r\n        projectProgressColor,\r\n        projectProgressSelectedColor,\r\n        projectBackgroundColor,\r\n        projectBackgroundSelectedColor\r\n      );\r\n      break;\r\n    default:\r\n      barTask = convertToBar(\r\n        task,\r\n        index,\r\n        dates,\r\n        dateDelta,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        rtl,\r\n        barProgressColor,\r\n        barProgressSelectedColor,\r\n        barBackgroundColor,\r\n        barBackgroundSelectedColor\r\n      );\r\n      break;\r\n  }\r\n  return barTask;\r\n};\r\n\r\nconst convertToBar = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  dateDelta: number,\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  rtl: boolean,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string\r\n): BarTask => {\r\n  let x1: number;\r\n  let x2: number;\r\n  if (rtl) {\r\n    x2 = taskXCoordinateRTL(task.start, dates, dateDelta, columnWidth);\r\n    x1 = taskXCoordinateRTL(task.end, dates, dateDelta, columnWidth);\r\n  } else {\r\n    x1 = taskXCoordinate(task.start, dates, dateDelta, columnWidth);\r\n    x2 = taskXCoordinate(task.end, dates, dateDelta, columnWidth);\r\n  }\r\n  let typeInternal: TaskTypeInternal = task.type;\r\n  if (typeInternal === \"task\" && x2 - x1 < handleWidth * 2) {\r\n    typeInternal = \"smalltask\";\r\n    x2 = x1 + handleWidth * 2;\r\n  }\r\n\r\n  const [progressWidth, progressX] = progressWithByParams(\r\n    x1,\r\n    x2,\r\n    task.progress,\r\n    rtl\r\n  );\r\n  let y;\r\n  if (task.project === \"mother\") {\r\n    y = taskYCoordinate(0, rowHeight, taskHeight);\r\n  } else if (task.project === \"partner\") {\r\n    y = taskYCoordinate(1, rowHeight, taskHeight);\r\n  } else if (task.project === \"error\") {\r\n    y = taskYCoordinate(2, rowHeight, taskHeight);\r\n  } else {\r\n    y = taskYCoordinate(index, rowHeight, taskHeight);\r\n  }\r\n  const hideChildren = task.type === \"project\" ? task.hideChildren : undefined;\r\n\r\n  const styles = {\r\n    backgroundColor: barBackgroundColor,\r\n    backgroundSelectedColor: barBackgroundSelectedColor,\r\n    progressColor: barProgressColor,\r\n    progressSelectedColor: barProgressSelectedColor,\r\n    ...task.styles,\r\n  };\r\n  return {\r\n    ...task,\r\n    typeInternal,\r\n    x1,\r\n    x2,\r\n    y,\r\n    index,\r\n    progressX,\r\n    progressWidth,\r\n    barCornerRadius,\r\n    handleWidth,\r\n    hideChildren,\r\n    height: taskHeight,\r\n    barChildren: [],\r\n    styles,\r\n  };\r\n};\r\n\r\nconst convertToMilestone = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  dateDelta: number,\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string\r\n): BarTask => {\r\n  const x = taskXCoordinate(task.start, dates, dateDelta, columnWidth);\r\n  const y = taskYCoordinate(index, rowHeight, taskHeight);\r\n\r\n  const x1 = x - taskHeight * 0.5;\r\n  const x2 = x + taskHeight * 0.5;\r\n\r\n  const rotatedHeight = taskHeight / 1.414;\r\n  const styles = {\r\n    backgroundColor: milestoneBackgroundColor,\r\n    backgroundSelectedColor: milestoneBackgroundSelectedColor,\r\n    progressColor: \"\",\r\n    progressSelectedColor: \"\",\r\n    ...task.styles,\r\n  };\r\n  return {\r\n    ...task,\r\n    end: task.start,\r\n    x1,\r\n    x2,\r\n    y,\r\n    index,\r\n    progressX: 0,\r\n    progressWidth: 0,\r\n    barCornerRadius,\r\n    handleWidth,\r\n    typeInternal: task.type,\r\n    progress: 0,\r\n    height: rotatedHeight,\r\n    hideChildren: undefined,\r\n    barChildren: [],\r\n    styles,\r\n  };\r\n};\r\n\r\nexport const taskXCoordinate = (\r\n  xDate: Date,\r\n  dates: Date[],\r\n  dateDelta: number,\r\n  columnWidth: number\r\n) => {\r\n  const index = ~~(\r\n    (xDate.getTime() -\r\n      dates[0].getTime() +\r\n      xDate.getTimezoneOffset() -\r\n      dates[0].getTimezoneOffset()) /\r\n    dateDelta\r\n  );\r\n  const x = Math.round(\r\n    (index +\r\n      (xDate.getTime() -\r\n        dates[index].getTime() -\r\n        xDate.getTimezoneOffset() * 60 * 1000 +\r\n        dates[index].getTimezoneOffset() * 60 * 1000) /\r\n        dateDelta) *\r\n      columnWidth\r\n  );\r\n  return x;\r\n};\r\nconst taskXCoordinateRTL = (\r\n  xDate: Date,\r\n  dates: Date[],\r\n  dateDelta: number,\r\n  columnWidth: number\r\n) => {\r\n  let x = taskXCoordinate(xDate, dates, dateDelta, columnWidth);\r\n  x += columnWidth;\r\n  return x;\r\n};\r\nconst taskYCoordinate = (\r\n  index: number,\r\n  rowHeight: number,\r\n  taskHeight: number\r\n) => {\r\n  const y = index * rowHeight + (rowHeight - taskHeight) / 2;\r\n  return y;\r\n};\r\n\r\nexport const progressWithByParams = (\r\n  taskX1: number,\r\n  taskX2: number,\r\n  progress: number,\r\n  rtl: boolean\r\n) => {\r\n  const progressWidth = (taskX2 - taskX1) * progress * 0.01;\r\n  let progressX: number;\r\n  if (rtl) {\r\n    progressX = taskX2 - progressWidth;\r\n  } else {\r\n    progressX = taskX1;\r\n  }\r\n  return [progressWidth, progressX];\r\n};\r\n\r\nexport const progressByProgressWidth = (\r\n  progressWidth: number,\r\n  barTask: BarTask\r\n) => {\r\n  const barWidth = barTask.x2 - barTask.x1;\r\n  const progressPercent = Math.round((progressWidth * 100) / barWidth);\r\n  if (progressPercent >= 100) return 100;\r\n  else if (progressPercent <= 0) return 0;\r\n  else return progressPercent;\r\n};\r\n\r\nconst progressByX = (x: number, task: BarTask) => {\r\n  if (x >= task.x2) return 100;\r\n  else if (x <= task.x1) return 0;\r\n  else {\r\n    const barWidth = task.x2 - task.x1;\r\n    const progressPercent = Math.round(((x - task.x1) * 100) / barWidth);\r\n    return progressPercent;\r\n  }\r\n};\r\nconst progressByXRTL = (x: number, task: BarTask) => {\r\n  if (x >= task.x2) return 0;\r\n  else if (x <= task.x1) return 100;\r\n  else {\r\n    const barWidth = task.x2 - task.x1;\r\n    const progressPercent = Math.round(((task.x2 - x) * 100) / barWidth);\r\n    return progressPercent;\r\n  }\r\n};\r\n\r\nexport const getProgressPoint = (\r\n  progressX: number,\r\n  taskY: number,\r\n  taskHeight: number\r\n) => {\r\n  const point = [\r\n    progressX - 5,\r\n    taskY + taskHeight,\r\n    progressX + 5,\r\n    taskY + taskHeight,\r\n    progressX,\r\n    taskY + taskHeight - 8.66,\r\n  ];\r\n  return point.join(\",\");\r\n};\r\n\r\nconst startByX = (x: number, xStep: number, task: BarTask) => {\r\n  if (x >= task.x2 - task.handleWidth * 2) {\r\n    x = task.x2 - task.handleWidth * 2;\r\n  }\r\n  const steps = Math.round((x - task.x1) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  const newX = task.x1 + additionalXValue;\r\n  return newX;\r\n};\r\n\r\nconst endByX = (x: number, xStep: number, task: BarTask) => {\r\n  if (x <= task.x1 + task.handleWidth * 2) {\r\n    x = task.x1 + task.handleWidth * 2;\r\n  }\r\n  const steps = Math.round((x - task.x2) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  const newX = task.x2 + additionalXValue;\r\n  return newX;\r\n};\r\n\r\nconst moveByX = (x: number, xStep: number, task: BarTask) => {\r\n  const steps = Math.round((x - task.x1) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  const newX1 = task.x1 + additionalXValue;\r\n  const newX2 = newX1 + task.x2 - task.x1;\r\n  return [newX1, newX2];\r\n};\r\n\r\nconst dateByX = (\r\n  x: number,\r\n  taskX: number,\r\n  taskDate: Date,\r\n  xStep: number,\r\n  timeStep: number\r\n) => {\r\n  let newDate = new Date(((x - taskX) / xStep) * timeStep + taskDate.getTime());\r\n  newDate = new Date(\r\n    newDate.getTime() +\r\n      (newDate.getTimezoneOffset() - taskDate.getTimezoneOffset()) * 60000\r\n  );\r\n  return newDate;\r\n};\r\n\r\n/**\r\n * Method handles event in real time(mousemove) and on finish(mouseup)\r\n */\r\nexport const handleTaskBySVGMouseEvent = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number,\r\n  rtl: boolean\r\n): { isChanged: boolean; changedTask: BarTask } => {\r\n  let result: { isChanged: boolean; changedTask: BarTask };\r\n  switch (selectedTask.type) {\r\n    case \"milestone\":\r\n      result = handleTaskBySVGMouseEventForMilestone(\r\n        svgX,\r\n        action,\r\n        selectedTask,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta\r\n      );\r\n      break;\r\n    default:\r\n      result = handleTaskBySVGMouseEventForBar(\r\n        svgX,\r\n        action,\r\n        selectedTask,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta,\r\n        rtl\r\n      );\r\n      break;\r\n  }\r\n  return result;\r\n};\r\n\r\nconst handleTaskBySVGMouseEventForBar = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number,\r\n  rtl: boolean\r\n): { isChanged: boolean; changedTask: BarTask } => {\r\n  const changedTask: BarTask = { ...selectedTask };\r\n  let isChanged = false;\r\n  switch (action) {\r\n    case \"progress\":\r\n      if (rtl) {\r\n        changedTask.progress = progressByXRTL(svgX, selectedTask);\r\n      } else {\r\n        changedTask.progress = progressByX(svgX, selectedTask);\r\n      }\r\n      isChanged = changedTask.progress !== selectedTask.progress;\r\n      if (isChanged) {\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    case \"start\": {\r\n      const newX1 = startByX(svgX, xStep, selectedTask);\r\n      changedTask.x1 = newX1;\r\n      isChanged = changedTask.x1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        if (rtl) {\r\n          changedTask.end = dateByX(\r\n            newX1,\r\n            selectedTask.x1,\r\n            selectedTask.end,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        } else {\r\n          changedTask.start = dateByX(\r\n            newX1,\r\n            selectedTask.x1,\r\n            selectedTask.start,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        }\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    }\r\n    case \"end\": {\r\n      const newX2 = endByX(svgX, xStep, selectedTask);\r\n      changedTask.x2 = newX2;\r\n      isChanged = changedTask.x2 !== selectedTask.x2;\r\n      if (isChanged) {\r\n        if (rtl) {\r\n          changedTask.start = dateByX(\r\n            newX2,\r\n            selectedTask.x2,\r\n            selectedTask.start,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        } else {\r\n          changedTask.end = dateByX(\r\n            newX2,\r\n            selectedTask.x2,\r\n            selectedTask.end,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        }\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    }\r\n    case \"move\": {\r\n      const [newMoveX1, newMoveX2] = moveByX(\r\n        svgX - initEventX1Delta,\r\n        xStep,\r\n        selectedTask\r\n      );\r\n      isChanged = newMoveX1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        changedTask.start = dateByX(\r\n          newMoveX1,\r\n          selectedTask.x1,\r\n          selectedTask.start,\r\n          xStep,\r\n          timeStep\r\n        );\r\n        changedTask.end = dateByX(\r\n          newMoveX2,\r\n          selectedTask.x2,\r\n          selectedTask.end,\r\n          xStep,\r\n          timeStep\r\n        );\r\n        changedTask.x1 = newMoveX1;\r\n        changedTask.x2 = newMoveX2;\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    }\r\n  }\r\n  return { isChanged, changedTask };\r\n};\r\n\r\nconst handleTaskBySVGMouseEventForMilestone = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number\r\n): { isChanged: boolean; changedTask: BarTask } => {\r\n  const changedTask: BarTask = { ...selectedTask };\r\n  let isChanged = false;\r\n  switch (action) {\r\n    case \"move\": {\r\n      const [newMoveX1, newMoveX2] = moveByX(\r\n        svgX - initEventX1Delta,\r\n        xStep,\r\n        selectedTask\r\n      );\r\n      isChanged = newMoveX1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        changedTask.start = dateByX(\r\n          newMoveX1,\r\n          selectedTask.x1,\r\n          selectedTask.start,\r\n          xStep,\r\n          timeStep\r\n        );\r\n        changedTask.end = changedTask.start;\r\n        changedTask.x1 = newMoveX1;\r\n        changedTask.x2 = newMoveX2;\r\n      }\r\n      break;\r\n    }\r\n  }\r\n  return { isChanged, changedTask };\r\n};\r\n","import React, { ReactChild } from \"react\";\r\nimport { Task } from \"../../types/public-types\";\r\nimport { addToDate } from \"../../helpers/date-helper\";\r\nimport { taskXCoordinate } from \"../../helpers/bar-helper\";\r\nimport styles from \"./grid.module.css\";\r\n\r\nexport type GridBodyProps = {\r\n  tasks: Task[];\r\n  dates: Date[];\r\n  svgWidth: number;\r\n  rowHeight: number;\r\n  columnWidth: number;\r\n  todayColor: string;\r\n  rtl: boolean;\r\n};\r\nexport const GridBody: React.FC<GridBodyProps> = ({\r\n  tasks,\r\n  dates,\r\n  rowHeight,\r\n  svgWidth,\r\n  columnWidth,\r\n  rtl,\r\n}) => {\r\n  let newTasks: Task[] = [];\r\n  // TODO: Here i removed row creation for each task.\r\n  for (const task of tasks) {\r\n    if (task.type === \"project\") {\r\n      newTasks = [...newTasks, task];\r\n    }\r\n  }\r\n  let y = 0;\r\n  const gridRows: ReactChild[] = [];\r\n  const rowLines: ReactChild[] = [\r\n    <line\r\n      key=\"RowLineFirst\"\r\n      x=\"0\"\r\n      y1={0}\r\n      x2={svgWidth}\r\n      y2={0}\r\n      className={styles.gridRowLine}\r\n    />,\r\n  ];\r\n  for (const task of newTasks) {\r\n    gridRows.push(\r\n      <rect\r\n        key={\"Row\" + task.id}\r\n        x=\"0\"\r\n        y={y}\r\n        width={svgWidth}\r\n        height={rowHeight}\r\n        className={styles.gridRow}\r\n      />\r\n    );\r\n    rowLines.push(\r\n      <line\r\n        key={\"RowLine\" + task.id}\r\n        x=\"0\"\r\n        y1={y + rowHeight}\r\n        x2={svgWidth}\r\n        y2={y + rowHeight}\r\n        className={styles.gridRowLine}\r\n      />\r\n    );\r\n    y += rowHeight;\r\n  }\r\n\r\n  const now = new Date();\r\n  let tickX = 0;\r\n  const ticks: ReactChild[] = [];\r\n  let today: ReactChild = <rect />;\r\n  let startDay: ReactChild = <line />;\r\n  let startDayText: ReactChild = <text />;\r\n  const monthName = new Intl.DateTimeFormat(\"da-DA\", { month: \"long\" }).format;\r\n  for (let i = 0; i < dates.length; i++) {\r\n    const date = dates[i];\r\n    ticks.push(\r\n      <line\r\n        key={date.getTime()}\r\n        x1={tickX}\r\n        y1={0}\r\n        x2={tickX}\r\n        y2={y}\r\n        className={styles.gridTick}\r\n      />\r\n    );\r\n    if (\r\n      (i + 1 !== dates.length &&\r\n        date.getTime() < now.getTime() &&\r\n        dates[i + 1].getTime() >= now.getTime()) ||\r\n      // if current date is last\r\n      (i !== 0 &&\r\n        i + 1 === dates.length &&\r\n        date.getTime() < now.getTime() &&\r\n        addToDate(\r\n          date,\r\n          date.getTime() - dates[i - 1].getTime(),\r\n          \"millisecond\"\r\n        ).getTime() >= now.getTime())\r\n    ) {\r\n      today = (\r\n        // <rect\r\n        //   x={tickX}\r\n        //   y={0}\r\n        //   width={2}\r\n        //   height={y}\r\n        //   stroke={todayColor}\r\n        //   strokeWidth={5}\r\n        // />\r\n        <line\r\n          strokeDasharray=\"5,5\"\r\n          x1={tickX}\r\n          y1={y}\r\n          x2={tickX}\r\n          y2={-20}\r\n          stroke=\"#fff\"\r\n        />\r\n      );\r\n    }\r\n    // rtl for today\r\n    if (\r\n      rtl &&\r\n      i + 1 !== dates.length &&\r\n      date.getTime() >= now.getTime() &&\r\n      dates[i + 1].getTime() < now.getTime()\r\n    ) {\r\n      today = (\r\n        <rect\r\n          x={tickX + columnWidth}\r\n          y={0}\r\n          width={2}\r\n          height={y}\r\n          fill=\"#fff\"\r\n          strokeWidth={2}\r\n        />\r\n      );\r\n    }\r\n    tickX += columnWidth;\r\n  }\r\n  const lastTick = (\r\n    <line x1={tickX} y1={0} x2={tickX} y2={y} className={styles.gridTick} />\r\n  );\r\n  const dateDelta =\r\n    dates[1].getTime() -\r\n    dates[0].getTime() -\r\n    dates[1].getTimezoneOffset() * 60 * 1000 +\r\n    dates[0].getTimezoneOffset() * 60 * 1000;\r\n  let startDateX = 0;\r\n  let birthDate = new Date();\r\n  for (const task of tasks) {\r\n    if (task.periodeType === \"PregnancyLeave\") {\r\n      startDateX = taskXCoordinate(task.end, dates, dateDelta, columnWidth);\r\n      birthDate = task.end;\r\n    }\r\n  }\r\n  startDay = (\r\n    <line\r\n      x1={startDateX + 1}\r\n      y1={y + 22}\r\n      x2={startDateX + 1}\r\n      y2={0}\r\n      stroke=\"#0B2432\"\r\n      strokeWidth=\"2\"\r\n      strokeLinecap=\"round\"\r\n      strokeDasharray=\"0.1 7\"\r\n    />\r\n  );\r\n  startDayText = (\r\n    <text x={startDateX + 10} y={y + 22}>\r\n      Fødsel, {birthDate.getDate()} {monthName(birthDate)}\r\n    </text>\r\n  );\r\n  return (\r\n    <g className=\"gridBody\">\r\n      <g className=\"rows\">{gridRows}</g>\r\n      <g className=\"rowLines\">{rowLines}</g>\r\n      <g className=\"ticks\">{ticks}</g>\r\n      <g className=\"today\">{today}</g>\r\n      <g className=\"startDay\" style={{ position: \"relative\" }}>\r\n        {startDay}\r\n      </g>\r\n      <g className={styles.startDayText}>{startDayText}</g>\r\n      <g className=\"lastTick\">{lastTick}</g>\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { GridBody, GridBodyProps } from \"./grid-body\";\r\n\r\nexport type GridProps = GridBodyProps;\r\nexport const Grid: React.FC<GridProps> = props => {\r\n  return (\r\n    <g className=\"grid\">\r\n      <GridBody {...props} />\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./calendar.module.css\";\r\n\r\ntype TopPartOfCalendarProps = {\r\n  value: string;\r\n  x1Line: number;\r\n  y1Line: number;\r\n  y2Line: number;\r\n  xText: number;\r\n  yText: number;\r\n};\r\n\r\nexport const TopPartOfCalendar: React.FC<TopPartOfCalendarProps> = ({\r\n  value,\r\n  // x1Line,\r\n  // y1Line,\r\n  // y2Line,\r\n  xText,\r\n  yText,\r\n}) => {\r\n  return (\r\n    <g className=\"calendarTop\">\r\n      {/* <line\r\n        x1={x1Line}\r\n        y1={y1Line}\r\n        x2={x1Line}\r\n        y2={y2Line}\r\n        className={styles.calendarTopTick}\r\n        key={value + \"line\"}\r\n      /> */}\r\n      <text\r\n        key={value + \"text\"}\r\n        y={yText}\r\n        x={xText}\r\n        className={styles.calendarTopText}\r\n      >\r\n        {value}\r\n      </text>\r\n    </g>\r\n  );\r\n};\r\n","import React, { ReactChild } from \"react\";\r\nimport { ViewMode } from \"../../types/public-types\";\r\nimport { TopPartOfCalendar } from \"./top-part-of-calendar\";\r\nimport {\r\n  getCachedDateTimeFormat,\r\n  getDaysInMonth,\r\n  getLocalDayOfWeek,\r\n  getLocaleMonth,\r\n  getWeekNumberISO8601,\r\n} from \"../../helpers/date-helper\";\r\nimport { DateSetup } from \"../../types/date-setup\";\r\nimport styles from \"./calendar.module.css\";\r\n\r\nexport type CalendarProps = {\r\n  dateSetup: DateSetup;\r\n  locale: string;\r\n  viewMode: ViewMode;\r\n  rtl: boolean;\r\n  headerHeight: number;\r\n  columnWidth: number;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n};\r\n\r\nexport const Calendar: React.FC<CalendarProps> = ({\r\n  dateSetup,\r\n  locale,\r\n  viewMode,\r\n  rtl,\r\n  headerHeight,\r\n  columnWidth,\r\n  fontFamily,\r\n  fontSize,\r\n}) => {\r\n  const getCalendarValuesForMonth = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    for (let i = 0; i < dateSetup.dates.length; i++) {\r\n      const date = dateSetup.dates[i];\r\n      const bottomValue = getLocaleMonth(date, locale);\r\n      bottomValues.push(\r\n        <text\r\n          key={bottomValue + date.getFullYear()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * i + columnWidth * 0.5}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (\r\n        i === 0 ||\r\n        date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\r\n      ) {\r\n        const topValue = date.getFullYear().toString();\r\n        let xText: number;\r\n        if (rtl) {\r\n          xText = (6 + i + date.getMonth() + 1) * columnWidth;\r\n        } else {\r\n          xText = (6 + i - date.getMonth()) * columnWidth;\r\n        }\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue}\r\n            value={topValue}\r\n            x1Line={columnWidth * i}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={xText}\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForWeek = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    let weeksCount: number = 1;\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = dates.length - 1; i >= 0; i--) {\r\n      const date = dates[i];\r\n      let topValue = \"\";\r\n      if (i === 0 || date.getMonth() !== dates[i - 1].getMonth()) {\r\n        // top\r\n        topValue = `${getLocaleMonth(date, locale)}, ${date.getFullYear()}`;\r\n      }\r\n      // bottom\r\n      const bottomValue = `W${getWeekNumberISO8601(date)}`;\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * (i + +rtl)}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n\r\n      if (topValue) {\r\n        // if last day is new month\r\n        if (i !== dates.length - 1) {\r\n          topValues.push(\r\n            <TopPartOfCalendar\r\n              key={topValue}\r\n              value={topValue}\r\n              x1Line={columnWidth * i + weeksCount * columnWidth}\r\n              y1Line={0}\r\n              y2Line={topDefaultHeight}\r\n              xText={columnWidth * i + columnWidth * weeksCount * 0.5}\r\n              yText={topDefaultHeight * 0.9}\r\n            />\r\n          );\r\n        }\r\n        weeksCount = 0;\r\n      }\r\n      weeksCount++;\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForDay = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = 0; i < dates.length; i++) {\r\n      const date = dates[i];\r\n      const bottomValue = `${getLocalDayOfWeek(date, locale, \"short\")}, ${date\r\n        .getDate()\r\n        .toString()}`;\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * i + columnWidth * 0.5}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (\r\n        i + 1 !== dates.length &&\r\n        date.getMonth() !== dates[i + 1].getMonth()\r\n      ) {\r\n        const topValue = getLocaleMonth(date, locale);\r\n\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue + date.getFullYear()}\r\n            value={topValue}\r\n            x1Line={columnWidth * (i + 1)}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={\r\n              columnWidth * (i + 1) -\r\n              getDaysInMonth(date.getMonth(), date.getFullYear()) *\r\n                columnWidth *\r\n                0.5\r\n            }\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForPartOfDay = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const ticks = viewMode === ViewMode.HalfDay ? 2 : 4;\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = 0; i < dates.length; i++) {\r\n      const date = dates[i];\r\n      const bottomValue = getCachedDateTimeFormat(locale, {\r\n        hour: \"numeric\",\r\n      }).format(date);\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * (i + +rtl)}\r\n          className={styles.calendarBottomText}\r\n          fontFamily={fontFamily}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (i === 0 || date.getDate() !== dates[i - 1].getDate()) {\r\n        const topValue = `${getLocalDayOfWeek(\r\n          date,\r\n          locale,\r\n          \"short\"\r\n        )}, ${date.getDate()} ${getLocaleMonth(date, locale)}`;\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue + date.getFullYear()}\r\n            value={topValue}\r\n            x1Line={columnWidth * i + ticks * columnWidth}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={columnWidth * i + ticks * columnWidth * 0.5}\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForHour = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = 0; i < dates.length; i++) {\r\n      const date = dates[i];\r\n      const bottomValue = getCachedDateTimeFormat(locale, {\r\n        hour: \"numeric\",\r\n      }).format(date);\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * (i + +rtl)}\r\n          className={styles.calendarBottomText}\r\n          fontFamily={fontFamily}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (i === 0 || date.getDate() !== dates[i - 1].getDate()) {\r\n        const topValue = `${getLocalDayOfWeek(\r\n          date,\r\n          locale,\r\n          \"long\"\r\n        )}, ${date.getDate()} ${getLocaleMonth(date, locale)}`;\r\n        const topPosition = (date.getHours() - 24) / 2;\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue + date.getFullYear()}\r\n            value={topValue}\r\n            x1Line={columnWidth * i}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={columnWidth * (i + topPosition)}\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  let topValues: ReactChild[] = [];\r\n  let bottomValues: ReactChild[] = [];\r\n  switch (dateSetup.viewMode) {\r\n    case ViewMode.Month:\r\n      [topValues, bottomValues] = getCalendarValuesForMonth();\r\n      break;\r\n    case ViewMode.Week:\r\n      [topValues, bottomValues] = getCalendarValuesForWeek();\r\n      break;\r\n    case ViewMode.Day:\r\n      [topValues, bottomValues] = getCalendarValuesForDay();\r\n      break;\r\n    case ViewMode.QuarterDay:\r\n    case ViewMode.HalfDay:\r\n      [topValues, bottomValues] = getCalendarValuesForPartOfDay();\r\n      break;\r\n    case ViewMode.Hour:\r\n      [topValues, bottomValues] = getCalendarValuesForHour();\r\n  }\r\n  return (\r\n    <g className=\"calendar\" fontSize={fontSize} fontFamily={fontFamily}>\r\n      <rect\r\n        x={0}\r\n        y={0}\r\n        width={columnWidth * dateSetup.dates.length}\r\n        height={headerHeight}\r\n        className={styles.calendarHeader}\r\n      />\r\n      {bottomValues} {topValues}\r\n    </g>\r\n  );\r\n};\r\n","// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","import React from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\n\r\ntype ArrowProps = {\r\n  taskFrom: BarTask;\r\n  taskTo: BarTask;\r\n  rowHeight: number;\r\n  taskHeight: number;\r\n  arrowIndent: number;\r\n  rtl: boolean;\r\n};\r\nexport const Arrow: React.FC<ArrowProps> = ({\r\n  taskFrom,\r\n  taskTo,\r\n  rowHeight,\r\n  taskHeight,\r\n  arrowIndent,\r\n  rtl,\r\n}) => {\r\n  let path: string;\r\n  let trianglePoints: string;\r\n  if (rtl) {\r\n    [path, trianglePoints] = drownPathAndTriangleRTL(\r\n      taskFrom,\r\n      taskTo,\r\n      rowHeight,\r\n      taskHeight,\r\n      arrowIndent\r\n    );\r\n  } else {\r\n    [path, trianglePoints] = drownPathAndTriangle(\r\n      taskFrom,\r\n      taskTo,\r\n      rowHeight,\r\n      taskHeight,\r\n      arrowIndent\r\n    );\r\n  }\r\n\r\n  return (\r\n    <g className=\"arrow\">\r\n      <path strokeWidth=\"1.5\" d={path} fill=\"none\" />\r\n      <polygon points={trianglePoints} />\r\n    </g>\r\n  );\r\n};\r\n\r\nconst drownPathAndTriangle = (\r\n  taskFrom: BarTask,\r\n  taskTo: BarTask,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  arrowIndent: number\r\n) => {\r\n  const indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\r\n  const taskToEndPosition = taskTo.y + taskHeight / 2;\r\n  const taskFromEndPosition = taskFrom.x2 + arrowIndent * 2;\r\n  const taskFromHorizontalOffsetValue =\r\n    taskFromEndPosition < taskTo.x1 ? \"\" : `H ${taskTo.x1 - arrowIndent}`;\r\n  const taskToHorizontalOffsetValue =\r\n    taskFromEndPosition > taskTo.x1\r\n      ? arrowIndent\r\n      : taskTo.x1 - taskFrom.x2 - arrowIndent;\r\n\r\n  const path = `M ${taskFrom.x2} ${taskFrom.y + taskHeight / 2} \r\n  h ${arrowIndent} \r\n  v ${(indexCompare * rowHeight) / 2} \r\n  ${taskFromHorizontalOffsetValue}\r\n  V ${taskToEndPosition} \r\n  h ${taskToHorizontalOffsetValue}`;\r\n\r\n  const trianglePoints = `${taskTo.x1},${taskToEndPosition} \r\n  ${taskTo.x1 - 5},${taskToEndPosition - 5} \r\n  ${taskTo.x1 - 5},${taskToEndPosition + 5}`;\r\n  return [path, trianglePoints];\r\n};\r\n\r\nconst drownPathAndTriangleRTL = (\r\n  taskFrom: BarTask,\r\n  taskTo: BarTask,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  arrowIndent: number\r\n) => {\r\n  const indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\r\n  const taskToEndPosition = taskTo.y + taskHeight / 2;\r\n  const taskFromEndPosition = taskFrom.x1 - arrowIndent * 2;\r\n  const taskFromHorizontalOffsetValue =\r\n    taskFromEndPosition > taskTo.x2 ? \"\" : `H ${taskTo.x2 + arrowIndent}`;\r\n  const taskToHorizontalOffsetValue =\r\n    taskFromEndPosition < taskTo.x2\r\n      ? -arrowIndent\r\n      : taskTo.x2 - taskFrom.x1 + arrowIndent;\r\n\r\n  const path = `M ${taskFrom.x1} ${taskFrom.y + taskHeight / 2} \r\n  h ${-arrowIndent} \r\n  v ${(indexCompare * rowHeight) / 2} \r\n  ${taskFromHorizontalOffsetValue}\r\n  V ${taskToEndPosition} \r\n  h ${taskToHorizontalOffsetValue}`;\r\n\r\n  const trianglePoints = `${taskTo.x2},${taskToEndPosition} \r\n  ${taskTo.x2 + 5},${taskToEndPosition + 5} \r\n  ${taskTo.x2 + 5},${taskToEndPosition - 5}`;\r\n  return [path, trianglePoints];\r\n};\r\n","import { BarTask } from \"../types/bar-task\";\r\nimport { Task } from \"../types/public-types\";\r\n\r\nexport function isKeyboardEvent(\r\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\r\n): event is React.KeyboardEvent {\r\n  return (event as React.KeyboardEvent).key !== undefined;\r\n}\r\n\r\nexport function isMouseEvent(\r\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\r\n): event is React.MouseEvent {\r\n  return (event as React.MouseEvent).clientX !== undefined;\r\n}\r\n\r\nexport function isBarTask(task: Task | BarTask): task is BarTask {\r\n  return (task as BarTask).x1 !== undefined;\r\n}\r\n\r\nexport function removeHiddenTasks(tasks: Task[]) {\r\n  const groupedTasks = tasks.filter(\r\n    t => t.hideChildren && t.type === \"project\"\r\n  );\r\n  if (groupedTasks.length > 0) {\r\n    for (let i = 0; groupedTasks.length > i; i++) {\r\n      const groupedTask = groupedTasks[i];\r\n      const children = getChildren(tasks, groupedTask);\r\n      tasks = tasks.filter(t => children.indexOf(t) === -1);\r\n    }\r\n  }\r\n  return tasks;\r\n}\r\n\r\nfunction getChildren(taskList: Task[], task: Task) {\r\n  let tasks: Task[] = [];\r\n  if (task.type !== \"project\") {\r\n    tasks = taskList.filter(\r\n      t => t.dependencies && t.dependencies.indexOf(task.id) !== -1\r\n    );\r\n  } else {\r\n    tasks = taskList.filter(t => t.project && t.project === task.id);\r\n  }\r\n  const taskChildren = tasks.reduce(\r\n    (children: Task[], t) =>\r\n      children.concat(children, getChildren(taskList, t)),\r\n    []\r\n  );\r\n  tasks = tasks.concat(tasks, taskChildren);\r\n  return tasks;\r\n}\r\n\r\nexport const sortTasks = (taskA: Task, taskB: Task) => {\r\n  const orderA = taskA.displayOrder || Number.MAX_VALUE;\r\n  const orderB = taskB.displayOrder || Number.MAX_VALUE;\r\n  if (orderA > orderB) {\r\n    return 1;\r\n  } else if (orderA < orderB) {\r\n    return -1;\r\n  } else {\r\n    return 0;\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport style from \"./bar.module.css\";\r\n\r\ntype BarDisplayProps = {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  isSelected: boolean;\r\n  /* progress start point */\r\n  progressX: number;\r\n  progressWidth: number;\r\n  barCornerRadius: number;\r\n  styles: {\r\n    backgroundColor: string;\r\n    backgroundSelectedColor: string;\r\n    progressColor: string;\r\n    progressSelectedColor: string;\r\n  };\r\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\r\n};\r\nexport const BarDisplay: React.FC<BarDisplayProps> = ({\r\n  x,\r\n  y,\r\n  width,\r\n  height,\r\n  isSelected,\r\n  progressX,\r\n  progressWidth,\r\n  barCornerRadius,\r\n  styles,\r\n  onMouseDown,\r\n}) => {\r\n  const getProcessColor = () => {\r\n    return isSelected ? styles.progressSelectedColor : styles.progressColor;\r\n  };\r\n\r\n  const getBarColor = () => {\r\n    return isSelected ? styles.backgroundSelectedColor : styles.backgroundColor;\r\n  };\r\n\r\n  return (\r\n    <g onMouseDown={onMouseDown}>\r\n      <rect\r\n        x={x}\r\n        width={width}\r\n        y={y}\r\n        height={height}\r\n        ry={barCornerRadius}\r\n        rx={barCornerRadius}\r\n        fill={getBarColor()}\r\n        className={style.barBackground}\r\n      />\r\n      <rect\r\n        x={progressX}\r\n        width={progressWidth}\r\n        y={y}\r\n        height={height}\r\n        ry={barCornerRadius}\r\n        rx={barCornerRadius}\r\n        fill={getProcessColor()}\r\n      />\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\n// import { getProgressPoint } from \"../../../helpers/bar-helper\";\r\nimport { BarDisplay } from \"./bar-display\";\r\n// import { BarDateHandle } from \"./bar-date-handle\";\r\n// import { BarProgressHandle } from \"./bar-progress-handle\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./bar.module.css\";\r\n\r\nexport const Bar: React.FC<TaskItemProps> = ({\r\n  task,\r\n  // isProgressChangeable,\r\n  isDateChangeable,\r\n  // rtl,\r\n  onEventStart,\r\n  isSelected,\r\n}) => {\r\n  // const progressPoint = getProgressPoint(\r\n  //   +!rtl * task.progressWidth + task.progressX,\r\n  //   task.y,\r\n  //   task.height\r\n  // );\r\n  // const handleHeight = task.height - 2;\r\n  return (\r\n    <g className={styles.barWrapper} tabIndex={0}>\r\n      <BarDisplay\r\n        x={task.x1}\r\n        y={task.y}\r\n        width={task.x2 - task.x1}\r\n        height={task.height}\r\n        progressX={task.progressX}\r\n        progressWidth={task.progressWidth}\r\n        barCornerRadius={task.barCornerRadius}\r\n        styles={task.styles}\r\n        isSelected={isSelected}\r\n        onMouseDown={e => {\r\n          isDateChangeable && onEventStart(\"move\", task, e);\r\n        }}\r\n      />\r\n      {/* <g className=\"handleGroup\">\r\n        {isDateChangeable && (\r\n          <g>\r\n            <BarDateHandle\r\n              x={task.x1 + 1}\r\n              y={task.y + 1}\r\n              width={task.handleWidth}\r\n              height={handleHeight}\r\n              barCornerRadius={task.barCornerRadius}\r\n              onMouseDown={e => {\r\n                onEventStart(\"start\", task, e);\r\n              }}\r\n            />\r\n            <BarDateHandle\r\n              x={task.x2 - task.handleWidth - 1}\r\n              y={task.y + 1}\r\n              width={task.handleWidth}\r\n              height={handleHeight}\r\n              barCornerRadius={task.barCornerRadius}\r\n              onMouseDown={e => {\r\n                onEventStart(\"end\", task, e);\r\n              }}\r\n            />\r\n          </g>\r\n        )}\r\n        {isProgressChangeable && (\r\n          <BarProgressHandle\r\n            progressPoint={progressPoint}\r\n            onMouseDown={e => {\r\n              onEventStart(\"progress\", task, e);\r\n            }}\r\n          />\r\n        )}\r\n      </g> */}\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./bar.module.css\";\r\n\r\ntype BarProgressHandleProps = {\r\n  progressPoint: string;\r\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\r\n};\r\nexport const BarProgressHandle: React.FC<BarProgressHandleProps> = ({\r\n  progressPoint,\r\n  onMouseDown,\r\n}) => {\r\n  return (\r\n    <polygon\r\n      className={styles.barHandle}\r\n      points={progressPoint}\r\n      onMouseDown={onMouseDown}\r\n    />\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { getProgressPoint } from \"../../../helpers/bar-helper\";\r\nimport { BarDisplay } from \"./bar-display\";\r\nimport { BarProgressHandle } from \"./bar-progress-handle\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./bar.module.css\";\r\n\r\nexport const BarSmall: React.FC<TaskItemProps> = ({\r\n  task,\r\n  isProgressChangeable,\r\n  isDateChangeable,\r\n  onEventStart,\r\n  isSelected,\r\n}) => {\r\n  const progressPoint = getProgressPoint(\r\n    task.progressWidth + task.x1,\r\n    task.y,\r\n    task.height\r\n  );\r\n  return (\r\n    <g className={styles.barWrapper} tabIndex={0}>\r\n      <BarDisplay\r\n        x={task.x1}\r\n        y={task.y}\r\n        width={task.x2 - task.x1}\r\n        height={task.height}\r\n        progressX={task.progressX}\r\n        progressWidth={task.progressWidth}\r\n        barCornerRadius={task.barCornerRadius}\r\n        styles={task.styles}\r\n        isSelected={isSelected}\r\n        onMouseDown={e => {\r\n          isDateChangeable && onEventStart(\"move\", task, e);\r\n        }}\r\n      />\r\n      <g className=\"handleGroup\">\r\n        {isProgressChangeable && (\r\n          <BarProgressHandle\r\n            progressPoint={progressPoint}\r\n            onMouseDown={e => {\r\n              onEventStart(\"progress\", task, e);\r\n            }}\r\n          />\r\n        )}\r\n      </g>\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./milestone.module.css\";\r\n\r\nexport const Milestone: React.FC<TaskItemProps> = ({\r\n  task,\r\n  isDateChangeable,\r\n  onEventStart,\r\n  isSelected,\r\n}) => {\r\n  const transform = `rotate(45 ${task.x1 + task.height * 0.356} \r\n    ${task.y + task.height * 0.85})`;\r\n  const getBarColor = () => {\r\n    return isSelected\r\n      ? task.styles.backgroundSelectedColor\r\n      : task.styles.backgroundColor;\r\n  };\r\n\r\n  return (\r\n    <g tabIndex={0} className={styles.milestoneWrapper}>\r\n      <rect\r\n        fill={getBarColor()}\r\n        x={task.x1}\r\n        width={task.height}\r\n        y={task.y}\r\n        height={task.height}\r\n        rx={task.barCornerRadius}\r\n        ry={task.barCornerRadius}\r\n        transform={transform}\r\n        className={styles.milestoneBackground}\r\n        onMouseDown={e => {\r\n          isDateChangeable && onEventStart(\"move\", task, e);\r\n        }}\r\n      />\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./project.module.css\";\r\n\r\nexport const Project: React.FC<TaskItemProps> = ({ task, isSelected }) => {\r\n  const barColor = isSelected\r\n    ? task.styles.backgroundSelectedColor\r\n    : task.styles.backgroundColor;\r\n  const processColor = isSelected\r\n    ? task.styles.progressSelectedColor\r\n    : task.styles.progressColor;\r\n  const projectWith = task.x2 - task.x1;\r\n\r\n  const projectLeftTriangle = [\r\n    task.x1,\r\n    task.y + task.height / 2 - 1,\r\n    task.x1,\r\n    task.y + task.height,\r\n    task.x1 + 15,\r\n    task.y + task.height / 2 - 1,\r\n  ].join(\",\");\r\n  const projectRightTriangle = [\r\n    task.x2,\r\n    task.y + task.height / 2 - 1,\r\n    task.x2,\r\n    task.y + task.height,\r\n    task.x2 - 15,\r\n    task.y + task.height / 2 - 1,\r\n  ].join(\",\");\r\n\r\n  return (\r\n    <g tabIndex={0} className={styles.projectWrapper}>\r\n      <rect\r\n        fill={barColor}\r\n        x={task.x1}\r\n        width={projectWith}\r\n        y={task.y}\r\n        height={task.height}\r\n        rx={task.barCornerRadius}\r\n        ry={task.barCornerRadius}\r\n        className={styles.projectBackground}\r\n      />\r\n      <rect\r\n        x={task.progressX}\r\n        width={task.progressWidth}\r\n        y={task.y}\r\n        height={task.height}\r\n        ry={task.barCornerRadius}\r\n        rx={task.barCornerRadius}\r\n        fill={processColor}\r\n      />\r\n      <rect\r\n        fill={barColor}\r\n        x={task.x1}\r\n        width={projectWith}\r\n        y={task.y}\r\n        height={task.height / 2}\r\n        rx={task.barCornerRadius}\r\n        ry={task.barCornerRadius}\r\n        className={styles.projectTop}\r\n      />\r\n      <polygon\r\n        className={styles.projectTop}\r\n        points={projectLeftTriangle}\r\n        fill={barColor}\r\n      />\r\n      <polygon\r\n        className={styles.projectTop}\r\n        points={projectRightTriangle}\r\n        fill={barColor}\r\n      />\r\n    </g>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { GanttContentMoveAction } from \"../../types/gantt-task-actions\";\r\nimport { Bar } from \"./bar/bar\";\r\nimport { BarSmall } from \"./bar/bar-small\";\r\nimport { Milestone } from \"./milestone/milestone\";\r\nimport { Project } from \"./project/project\";\r\n// import style from \"./task-list.module.css\";\r\n\r\nexport type TaskItemProps = {\r\n  task: BarTask;\r\n  arrowIndent: number;\r\n  taskHeight: number;\r\n  isProgressChangeable: boolean;\r\n  isDateChangeable: boolean;\r\n  isDelete: boolean;\r\n  isSelected: boolean;\r\n  rtl: boolean;\r\n  onEventStart: (\r\n    action: GanttContentMoveAction,\r\n    selectedTask: BarTask,\r\n    event?: React.MouseEvent | React.KeyboardEvent\r\n  ) => any;\r\n};\r\n\r\nexport const TaskItem: React.FC<TaskItemProps> = props => {\r\n  const {\r\n    task,\r\n    // arrowIndent,\r\n    isDelete,\r\n    // taskHeight,\r\n    isSelected,\r\n    // rtl,\r\n    onEventStart,\r\n  } = {\r\n    ...props,\r\n  };\r\n  // const textRef = useRef<SVGTextElement>(null);\r\n  const [taskItem, setTaskItem] = useState<JSX.Element>(<div />);\r\n  // const [isTextInside, setIsTextInside] = useState(true);\r\n\r\n  useEffect(() => {\r\n    switch (task.typeInternal) {\r\n      case \"milestone\":\r\n        setTaskItem(<Milestone {...props} />);\r\n        break;\r\n      case \"project\":\r\n        setTaskItem(<Project {...props} />);\r\n        break;\r\n      case \"smalltask\":\r\n        setTaskItem(<BarSmall {...props} />);\r\n        break;\r\n      default:\r\n        setTaskItem(<Bar {...props} />);\r\n        break;\r\n    }\r\n  }, [task, isSelected]);\r\n\r\n  // useEffect(() => {\r\n  //   if (textRef.current) {\r\n  //     setIsTextInside(textRef.current.getBBox().width < task.x2 - task.x1);\r\n  //   }\r\n  // }, [textRef, task]);\r\n\r\n  // const getX = () => {\r\n  //   const width = task.x2 - task.x1;\r\n  //   const hasChild = task.barChildren.length > 0;\r\n  //   if (isTextInside) {\r\n  //     return task.x1 + width * 0.5;\r\n  //   }\r\n  //   if (rtl && textRef.current) {\r\n  //     return (\r\n  //       task.x1 -\r\n  //       textRef.current.getBBox().width -\r\n  //       arrowIndent * +hasChild -\r\n  //       arrowIndent * 0.2\r\n  //     );\r\n  //   } else {\r\n  //     return task.x1 + width + arrowIndent * +hasChild + arrowIndent * 0.2;\r\n  //   }\r\n  // };\r\n\r\n  return (\r\n    <g\r\n      onKeyDown={e => {\r\n        switch (e.key) {\r\n          case \"Delete\": {\r\n            if (isDelete) onEventStart(\"delete\", task, e);\r\n            break;\r\n          }\r\n        }\r\n        e.stopPropagation();\r\n      }}\r\n      onMouseEnter={e => {\r\n        onEventStart(\"mouseenter\", task, e);\r\n      }}\r\n      onMouseLeave={e => {\r\n        onEventStart(\"mouseleave\", task, e);\r\n      }}\r\n      onDoubleClick={e => {\r\n        onEventStart(\"dblclick\", task, e);\r\n      }}\r\n      onFocus={() => {\r\n        onEventStart(\"select\", task);\r\n      }}\r\n    >\r\n      {taskItem}\r\n      {/* <text\r\n        x={getX()}\r\n        y={task.y + taskHeight * 0.5}\r\n        className={\r\n          isTextInside\r\n            ? style.barLabel\r\n            : style.barLabel && style.barLabelOutside\r\n        }\r\n        ref={textRef}\r\n      >\r\n        {task.name}\r\n      </text> */}\r\n    </g>\r\n  );\r\n};\r\n","/* eslint-disable no-empty */\r\nimport React from \"react\";\r\nimport { EventOption } from \"../../types/public-types\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { Arrow } from \"../other/arrow\";\r\n// import { handleTaskBySVGMouseEvent } from \"../../helpers/bar-helper\";\r\nimport { isKeyboardEvent } from \"../../helpers/other-helper\";\r\nimport { TaskItem } from \"../task-item/task-item\";\r\nimport {\r\n  // BarMoveAction,\r\n  GanttContentMoveAction,\r\n  GanttEvent,\r\n} from \"../../types/gantt-task-actions\";\r\n\r\nexport type TaskGanttContentProps = {\r\n  tasks: BarTask[];\r\n  dates: Date[];\r\n  ganttEvent: GanttEvent;\r\n  selectedTask: BarTask | undefined;\r\n  rowHeight: number;\r\n  columnWidth: number;\r\n  timeStep: number;\r\n  svg?: React.RefObject<SVGSVGElement>;\r\n  svgWidth: number;\r\n  taskHeight: number;\r\n  arrowColor: string;\r\n  arrowIndent: number;\r\n  fontSize: string;\r\n  fontFamily: string;\r\n  rtl: boolean;\r\n  setGanttEvent: (value: GanttEvent) => void;\r\n  setFailedTask: (value: BarTask | null) => void;\r\n  setSelectedTask: (taskId: string) => void;\r\n} & EventOption;\r\n\r\nexport const TaskGanttContent: React.FC<TaskGanttContentProps> = ({\r\n  tasks,\r\n  // dates,\r\n  ganttEvent,\r\n  selectedTask,\r\n  rowHeight,\r\n  // columnWidth,\r\n  // timeStep,\r\n  // svg,\r\n  taskHeight,\r\n  arrowColor,\r\n  arrowIndent,\r\n  fontFamily,\r\n  fontSize,\r\n  rtl,\r\n  setGanttEvent,\r\n  // setFailedTask,\r\n  setSelectedTask,\r\n  onDateChange,\r\n  onProgressChange,\r\n  onDoubleClick,\r\n  onDelete,\r\n}) => {\r\n  // const point = svg?.current?.createSVGPoint();\r\n  // const [xStep, setXStep] = useState(0);\r\n  // const [initEventX1Delta, setInitEventX1Delta] = useState(0);\r\n  // const [isMoving, setIsMoving] = useState(false);\r\n\r\n  // create xStep\r\n  // useEffect(() => {\r\n  //   const dateDelta =\r\n  //     dates[1].getTime() -\r\n  //     dates[0].getTime() -\r\n  //     dates[1].getTimezoneOffset() * 60 * 1000 +\r\n  //     dates[0].getTimezoneOffset() * 60 * 1000;\r\n  //   const newXStep = (timeStep * columnWidth) / dateDelta;\r\n  //   setXStep(newXStep);\r\n  // }, [columnWidth, dates, timeStep]);\r\n\r\n  // useEffect(() => {\r\n  //   // const handleMouseMove = async (event: MouseEvent) => {\r\n  //   //   if (!ganttEvent.changedTask || !point || !svg?.current) return;\r\n  //   //   event.preventDefault();\r\n\r\n  //   //   point.x = event.clientX;\r\n  //   //   const cursor = point.matrixTransform(\r\n  //   //     svg?.current.getScreenCTM()?.inverse()\r\n  //   //   );\r\n\r\n  //   //   const { isChanged, changedTask } = handleTaskBySVGMouseEvent(\r\n  //   //     cursor.x,\r\n  //   //     ganttEvent.action as BarMoveAction,\r\n  //   //     ganttEvent.changedTask,\r\n  //   //     xStep,\r\n  //   //     timeStep,\r\n  //   //     initEventX1Delta,\r\n  //   //     rtl\r\n  //   //   );\r\n  //   //   if (isChanged) {\r\n  //   //     setGanttEvent({ action: ganttEvent.action, changedTask });\r\n  //   //   }\r\n  //   // };\r\n\r\n  //   // const handleMouseUp = async (event: MouseEvent) => {\r\n  //   //   const { action, originalSelectedTask, changedTask } = ganttEvent;\r\n  //   //   if (!changedTask || !point || !svg?.current || !originalSelectedTask)\r\n  //   //     return;\r\n  //   //   event.preventDefault();\r\n\r\n  //   //   point.x = event.clientX;\r\n  //   //   const cursor = point.matrixTransform(\r\n  //   //     svg?.current.getScreenCTM()?.inverse()\r\n  //   //   );\r\n  //   //   const { changedTask: newChangedTask } = handleTaskBySVGMouseEvent(\r\n  //   //     cursor.x,\r\n  //   //     action as BarMoveAction,\r\n  //   //     changedTask,\r\n  //   //     xStep,\r\n  //   //     timeStep,\r\n  //   //     initEventX1Delta,\r\n  //   //     rtl\r\n  //   //   );\r\n\r\n  //   //   const isNotLikeOriginal =\r\n  //   //     originalSelectedTask.start !== newChangedTask.start ||\r\n  //   //     originalSelectedTask.end !== newChangedTask.end ||\r\n  //   //     originalSelectedTask.progress !== newChangedTask.progress;\r\n\r\n  //   //   // remove listeners\r\n  //   //   svg.current.removeEventListener(\"mousemove\", handleMouseMove);\r\n  //   //   svg.current.removeEventListener(\"mouseup\", handleMouseUp);\r\n  //   //   setGanttEvent({ action: \"\" });\r\n  //   //   setIsMoving(false);\r\n\r\n  //   //   // custom operation start\r\n  //   //   let operationSuccess = true;\r\n  //   //   if (\r\n  //   //     (action === \"move\" || action === \"end\" || action === \"start\") &&\r\n  //   //     onDateChange &&\r\n  //   //     isNotLikeOriginal\r\n  //   //   ) {\r\n  //   //     try {\r\n  //   //       const result = await onDateChange(\r\n  //   //         newChangedTask,\r\n  //   //         newChangedTask.barChildren\r\n  //   //       );\r\n  //   //       if (result !== undefined) {\r\n  //   //         operationSuccess = result;\r\n  //   //       }\r\n  //   //     } catch (error) {\r\n  //   //       operationSuccess = false;\r\n  //   //     }\r\n  //   //   } else if (onProgressChange && isNotLikeOriginal) {\r\n  //   //     try {\r\n  //   //       const result = await onProgressChange(\r\n  //   //         newChangedTask,\r\n  //   //         newChangedTask.barChildren\r\n  //   //       );\r\n  //   //       if (result !== undefined) {\r\n  //   //         operationSuccess = result;\r\n  //   //       }\r\n  //   //     } catch (error) {\r\n  //   //       operationSuccess = false;\r\n  //   //     }\r\n  //   //   }\r\n\r\n  //   //   // If operation is failed - return old state\r\n  //   //   if (!operationSuccess) {\r\n  //   //     setFailedTask(originalSelectedTask);\r\n  //   //   }\r\n  //   // };\r\n\r\n  //   if (\r\n  //     !isMoving &&\r\n  //     (ganttEvent.action === \"move\" ||\r\n  //       ganttEvent.action === \"end\" ||\r\n  //       ganttEvent.action === \"start\" ||\r\n  //       ganttEvent.action === \"progress\") &&\r\n  //     svg?.current\r\n  //   ) {\r\n  //     svg.current.addEventListener(\"mousemove\", handleMouseMove);\r\n  //     svg.current.addEventListener(\"mouseup\", handleMouseUp);\r\n  //     setIsMoving(true);\r\n  //   }\r\n  // }, [\r\n  //   ganttEvent,\r\n  //   xStep,\r\n  //   initEventX1Delta,\r\n  //   onProgressChange,\r\n  //   timeStep,\r\n  //   onDateChange,\r\n  //   svg,\r\n  //   isMoving,\r\n  // ]);\r\n\r\n  /**\r\n   * Method is Start point of task change\r\n   */\r\n  // TODO: refactor event methods.\r\n  const handleBarEventStart = async (\r\n    action: GanttContentMoveAction,\r\n    task: BarTask,\r\n    event?: React.MouseEvent | React.KeyboardEvent\r\n  ) => {\r\n    if (!event) {\r\n      if (action === \"select\") {\r\n        setSelectedTask(task.id);\r\n        if (!ganttEvent.action) {\r\n          setGanttEvent({\r\n            action,\r\n            changedTask: task,\r\n            originalSelectedTask: task,\r\n          });\r\n        }\r\n      }\r\n    }\r\n    // Keyboard events\r\n    else if (isKeyboardEvent(event)) {\r\n      if (action === \"delete\") {\r\n        if (onDelete) {\r\n          try {\r\n            const result = await onDelete(task);\r\n            if (result !== undefined && result) {\r\n              setGanttEvent({ action, changedTask: task });\r\n            }\r\n          } catch (error) {\r\n            console.error(\"Error on Delete. \" + error);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // Mouse Events\r\n    else if (action === \"mouseenter\") {\r\n    } else if (action === \"mouseleave\") {\r\n      if (ganttEvent.action === \"mouseenter\") {\r\n        setGanttEvent({ action: \"\" });\r\n      }\r\n    } else if (action === \"dblclick\") {\r\n      !!onDoubleClick && onDoubleClick(task);\r\n    }\r\n    // Change task event start\r\n    // else if (action === \"move\") {\r\n    //   if (!svg?.current || !point) return;\r\n    //   point.x = event.clientX;\r\n    //   const cursor = point.matrixTransform(\r\n    //     svg.current.getScreenCTM()?.inverse()\r\n    //   );\r\n    //   setInitEventX1Delta(cursor.x - task.x1);\r\n    //   setGanttEvent({\r\n    //     action,\r\n    //     changedTask: task,\r\n    //     originalSelectedTask: task,\r\n    //   });\r\n    // }\r\n    else {\r\n      setGanttEvent({\r\n        action,\r\n        changedTask: task,\r\n        originalSelectedTask: task,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <g className=\"content\">\r\n      <g className=\"arrows\" fill={arrowColor} stroke={arrowColor}>\r\n        {tasks.map(task => {\r\n          return task.barChildren.map(child => {\r\n            return (\r\n              <Arrow\r\n                key={`Arrow from ${task.id} to ${tasks[child.index].id}`}\r\n                taskFrom={task}\r\n                taskTo={tasks[child.index]}\r\n                rowHeight={rowHeight}\r\n                taskHeight={taskHeight}\r\n                arrowIndent={arrowIndent}\r\n                rtl={rtl}\r\n              />\r\n            );\r\n          });\r\n        })}\r\n      </g>\r\n      <g className=\"bar\" fontFamily={fontFamily} fontSize={fontSize}>\r\n        {tasks.map(task => {\r\n          // TODO: Here i restrict renderion only to type TASK...probably more to add here later on\r\n          return task.type === \"task\" ? (\r\n            <TaskItem\r\n              task={task}\r\n              arrowIndent={arrowIndent}\r\n              taskHeight={taskHeight}\r\n              isProgressChangeable={!!onProgressChange && !task.isDisabled}\r\n              isDateChangeable={!!onDateChange && !task.isDisabled}\r\n              isDelete={!task.isDisabled}\r\n              onEventStart={handleBarEventStart}\r\n              key={task.id}\r\n              isSelected={!!selectedTask && task.id === selectedTask.id}\r\n              rtl={rtl}\r\n            />\r\n          ) : null;\r\n        })}\r\n      </g>\r\n    </g>\r\n  );\r\n};\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport { GridProps, Grid } from \"../grid/grid\";\r\nimport { CalendarProps, Calendar } from \"../calendar/calendar\";\r\nimport { TaskGanttContentProps, TaskGanttContent } from \"./task-gantt-content\";\r\nimport styles from \"./gantt.module.css\";\r\n\r\nexport type TaskGanttProps = {\r\n  gridProps: GridProps;\r\n  calendarProps: CalendarProps;\r\n  barProps: TaskGanttContentProps;\r\n  ganttHeight: number;\r\n  scrollY: number;\r\n  scrollX: number;\r\n};\r\nexport const TaskGantt: React.FC<TaskGanttProps> = ({\r\n  gridProps,\r\n  calendarProps,\r\n  barProps,\r\n  ganttHeight,\r\n  scrollY,\r\n  scrollX,\r\n}) => {\r\n  const ganttSVGRef = useRef<SVGSVGElement>(null);\r\n  const horizontalContainerRef = useRef<HTMLDivElement>(null);\r\n  const verticalGanttContainerRef = useRef<HTMLDivElement>(null);\r\n  const newBarProps = { ...barProps, svg: ganttSVGRef };\r\n\r\n  useEffect(() => {\r\n    if (horizontalContainerRef.current) {\r\n      horizontalContainerRef.current.scrollTop = scrollY;\r\n    }\r\n  }, [scrollY]);\r\n\r\n  useEffect(() => {\r\n    if (verticalGanttContainerRef.current) {\r\n      verticalGanttContainerRef.current.scrollLeft = scrollX;\r\n    }\r\n  }, [scrollX]);\r\n\r\n  return (\r\n    <div\r\n      className={styles.ganttVerticalContainer}\r\n      ref={verticalGanttContainerRef}\r\n      dir=\"ltr\"\r\n    >\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width={gridProps.svgWidth}\r\n        height={calendarProps.headerHeight}\r\n        fontFamily={barProps.fontFamily}\r\n      >\r\n        <Calendar {...calendarProps} />\r\n      </svg>\r\n      <div\r\n        ref={horizontalContainerRef}\r\n        className={styles.horizontalContainer}\r\n        style={\r\n          ganttHeight\r\n            ? { height: ganttHeight, width: gridProps.svgWidth }\r\n            : { width: gridProps.svgWidth }\r\n        }\r\n      >\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width={gridProps.svgWidth}\r\n          height={barProps.rowHeight * 3}\r\n          fontFamily={barProps.fontFamily}\r\n          ref={ganttSVGRef}\r\n        >\r\n          <Grid {...gridProps} />\r\n          <TaskGanttContent {...newBarProps} />\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { SyntheticEvent, useRef, useEffect } from \"react\";\r\nimport styles from \"./horizontal-scroll.module.css\";\r\n\r\nexport const HorizontalScroll: React.FC<{\r\n  scroll: number;\r\n  svgWidth: number;\r\n  taskListWidth: number;\r\n  rtl: boolean;\r\n  onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\r\n}> = ({ scroll, svgWidth, taskListWidth, rtl, onScroll }) => {\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollLeft = scroll;\r\n    }\r\n  }, [scroll]);\r\n\r\n  return (\r\n    <div\r\n      dir=\"ltr\"\r\n      style={{\r\n        margin: rtl\r\n          ? `0px ${taskListWidth}px 0px 0px`\r\n          : `0px 0px 0px ${taskListWidth}px`,\r\n      }}\r\n      className={styles.scroll}\r\n      onScroll={onScroll}\r\n      ref={scrollRef}\r\n    >\r\n      <div style={{ width: svgWidth, height: 1 }} />\r\n    </div>\r\n  );\r\n};\r\n","import React, {\r\n  useState,\r\n  SyntheticEvent,\r\n  useRef,\r\n  useEffect,\r\n  useMemo,\r\n} from \"react\";\r\nimport { ViewMode, GanttProps, Task } from \"../../types/public-types\";\r\nimport { GridProps } from \"../grid/grid\";\r\nimport { ganttDateRange, seedDates } from \"../../helpers/date-helper\";\r\nimport { CalendarProps } from \"../calendar/calendar\";\r\nimport { TaskGanttContentProps } from \"./task-gantt-content\";\r\nimport { TaskListHeaderDefault } from \"../task-list/task-list-header\";\r\nimport { TaskListTableDefault } from \"../task-list/task-list-table\";\r\nimport { StandardTooltipContent, Tooltip } from \"../other/tooltip\";\r\nimport { VerticalScroll } from \"../other/vertical-scroll\";\r\nimport { TaskListProps, TaskList } from \"../task-list/task-list\";\r\nimport { TaskGantt } from \"./task-gantt\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { convertToBarTasks } from \"../../helpers/bar-helper\";\r\nimport { GanttEvent } from \"../../types/gantt-task-actions\";\r\nimport { DateSetup } from \"../../types/date-setup\";\r\nimport styles from \"./gantt.module.css\";\r\nimport { HorizontalScroll } from \"../other/horizontal-scroll\";\r\nimport { removeHiddenTasks, sortTasks } from \"../../helpers/other-helper\";\r\n\r\nexport const Gantt: React.FunctionComponent<GanttProps> = ({\r\n  tasks,\r\n  headerHeight = 50,\r\n  columnWidth = 60,\r\n  listCellWidth = \"155px\",\r\n  rowHeight = 115,\r\n  ganttHeight = 0,\r\n  viewMode = ViewMode.Day,\r\n  locale = \"en-GB\",\r\n  barFill = 31,\r\n  barCornerRadius = 2,\r\n  barProgressColor = \"#a3a3ff\",\r\n  barProgressSelectedColor = \"#8282f5\",\r\n  barBackgroundColor = \"#b8c2cc\",\r\n  barBackgroundSelectedColor = \"#aeb8c2\",\r\n  projectProgressColor = \"#7db59a\",\r\n  projectProgressSelectedColor = \"#59a985\",\r\n  projectBackgroundColor = \"#fac465\",\r\n  projectBackgroundSelectedColor = \"#f7bb53\",\r\n  milestoneBackgroundColor = \"#f1c453\",\r\n  milestoneBackgroundSelectedColor = \"#f29e4c\",\r\n  rtl = false,\r\n  handleWidth = 8,\r\n  timeStep = 300000,\r\n  arrowColor = \"grey\",\r\n  fontFamily = \"Inter, Arial, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue\",\r\n  fontSize = \"14px\",\r\n  arrowIndent = 20,\r\n  todayColor = \"red\",\r\n  viewDate,\r\n  TooltipContent = StandardTooltipContent,\r\n  TaskListHeader = TaskListHeaderDefault,\r\n  TaskListTable = TaskListTableDefault,\r\n  onDateChange,\r\n  onProgressChange,\r\n  onDoubleClick,\r\n  onDelete,\r\n  onSelect,\r\n  onExpanderClick,\r\n}) => {\r\n  const wrapperRef = useRef<HTMLDivElement>(null);\r\n  const taskListRef = useRef<HTMLDivElement>(null);\r\n  const [dateSetup, setDateSetup] = useState<DateSetup>(() => {\r\n    const [startDate, endDate] = ganttDateRange(tasks, viewMode);\r\n    return { viewMode, dates: seedDates(startDate, endDate, viewMode) };\r\n  });\r\n  const [currentViewDate, setCurrentViewDate] = useState<Date | undefined>(\r\n    undefined\r\n  );\r\n\r\n  const [taskListWidth, setTaskListWidth] = useState(0);\r\n  const [svgContainerWidth, setSvgContainerWidth] = useState(0);\r\n  const [svgContainerHeight, setSvgContainerHeight] = useState(ganttHeight);\r\n  const [barTasks, setBarTasks] = useState<BarTask[]>([]);\r\n  const [ganttEvent, setGanttEvent] = useState<GanttEvent>({\r\n    action: \"\",\r\n  });\r\n  const taskHeight = useMemo(\r\n    () => (rowHeight * barFill) / 100,\r\n    [rowHeight, barFill]\r\n  );\r\n\r\n  const [selectedTask, setSelectedTask] = useState<BarTask>();\r\n  const [failedTask, setFailedTask] = useState<BarTask | null>(null);\r\n\r\n  const svgWidth = dateSetup.dates.length * columnWidth;\r\n  const ganttFullHeight = barTasks.length * rowHeight;\r\n\r\n  const [scrollY, setScrollY] = useState(0);\r\n  const [scrollX, setScrollX] = useState(-1);\r\n  const [ignoreScrollEvent, setIgnoreScrollEvent] = useState(false);\r\n\r\n  // task change events\r\n  useEffect(() => {\r\n    let filteredTasks: Task[];\r\n    if (onExpanderClick) {\r\n      filteredTasks = removeHiddenTasks(tasks);\r\n    } else {\r\n      filteredTasks = tasks;\r\n    }\r\n    filteredTasks = filteredTasks.sort(sortTasks);\r\n    const [startDate, endDate] = ganttDateRange(filteredTasks, viewMode);\r\n    let newDates = seedDates(startDate, endDate, viewMode);\r\n    if (rtl) {\r\n      newDates = newDates.reverse();\r\n      if (scrollX === -1) {\r\n        setScrollX(newDates.length * columnWidth);\r\n      }\r\n    }\r\n    setDateSetup({ dates: newDates, viewMode });\r\n    setBarTasks(\r\n      convertToBarTasks(\r\n        filteredTasks,\r\n        newDates,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        rtl,\r\n        barProgressColor,\r\n        barProgressSelectedColor,\r\n        barBackgroundColor,\r\n        barBackgroundSelectedColor,\r\n        projectProgressColor,\r\n        projectProgressSelectedColor,\r\n        projectBackgroundColor,\r\n        projectBackgroundSelectedColor,\r\n        milestoneBackgroundColor,\r\n        milestoneBackgroundSelectedColor\r\n      )\r\n    );\r\n  }, [\r\n    tasks,\r\n    viewMode,\r\n    rowHeight,\r\n    barCornerRadius,\r\n    columnWidth,\r\n    taskHeight,\r\n    handleWidth,\r\n    barProgressColor,\r\n    barProgressSelectedColor,\r\n    barBackgroundColor,\r\n    barBackgroundSelectedColor,\r\n    projectProgressColor,\r\n    projectProgressSelectedColor,\r\n    projectBackgroundColor,\r\n    projectBackgroundSelectedColor,\r\n    milestoneBackgroundColor,\r\n    milestoneBackgroundSelectedColor,\r\n    rtl,\r\n    scrollX,\r\n    onExpanderClick,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      viewMode === dateSetup.viewMode &&\r\n      ((viewDate && !currentViewDate) ||\r\n        (viewDate && currentViewDate?.valueOf() !== viewDate.valueOf()))\r\n    ) {\r\n      const dates = dateSetup.dates;\r\n      const index = dates.findIndex(\r\n        (d, i) =>\r\n          viewDate.valueOf() >= d.valueOf() &&\r\n          i + 1 !== dates.length &&\r\n          viewDate.valueOf() < dates[i + 1].valueOf()\r\n      );\r\n      if (index === -1) {\r\n        return;\r\n      }\r\n      setCurrentViewDate(viewDate);\r\n      setScrollX(columnWidth * index);\r\n    }\r\n  }, [\r\n    viewDate,\r\n    columnWidth,\r\n    dateSetup.dates,\r\n    viewMode,\r\n    currentViewDate,\r\n    setCurrentViewDate,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const { changedTask, action } = ganttEvent;\r\n    if (changedTask) {\r\n      if (action === \"delete\") {\r\n        setGanttEvent({ action: \"\" });\r\n        setBarTasks(barTasks.filter(t => t.id !== changedTask.id));\r\n      } else if (\r\n        action === \"move\" ||\r\n        action === \"end\" ||\r\n        action === \"start\" ||\r\n        action === \"progress\"\r\n      ) {\r\n        const prevStateTask = barTasks.find(t => t.id === changedTask.id);\r\n        if (\r\n          prevStateTask &&\r\n          (prevStateTask.start.getTime() !== changedTask.start.getTime() ||\r\n            prevStateTask.end.getTime() !== changedTask.end.getTime() ||\r\n            prevStateTask.progress !== changedTask.progress)\r\n        ) {\r\n          // actions for change\r\n          const newTaskList = barTasks.map(t =>\r\n            t.id === changedTask.id ? changedTask : t\r\n          );\r\n          setBarTasks(newTaskList);\r\n        }\r\n      }\r\n    }\r\n  }, [ganttEvent, barTasks]);\r\n\r\n  useEffect(() => {\r\n    if (failedTask) {\r\n      setBarTasks(barTasks.map(t => (t.id !== failedTask.id ? t : failedTask)));\r\n      setFailedTask(null);\r\n    }\r\n  }, [failedTask, barTasks]);\r\n\r\n  useEffect(() => {\r\n    if (!listCellWidth) {\r\n      setTaskListWidth(0);\r\n    }\r\n    if (taskListRef.current) {\r\n      setTaskListWidth(taskListRef.current.offsetWidth);\r\n    }\r\n  }, [taskListRef, listCellWidth]);\r\n\r\n  useEffect(() => {\r\n    if (wrapperRef.current) {\r\n      setSvgContainerWidth(wrapperRef.current.offsetWidth - taskListWidth);\r\n    }\r\n  }, [wrapperRef, taskListWidth]);\r\n\r\n  useEffect(() => {\r\n    if (ganttHeight) {\r\n      setSvgContainerHeight(ganttHeight + headerHeight);\r\n    } else {\r\n      setSvgContainerHeight(tasks.length * rowHeight + headerHeight);\r\n    }\r\n  }, [ganttHeight, tasks]);\r\n\r\n  // scroll events\r\n  useEffect(() => {\r\n    const handleWheel = (event: WheelEvent) => {\r\n      if (event.shiftKey || event.deltaX) {\r\n        const scrollMove = event.deltaX ? event.deltaX : event.deltaY;\r\n        let newScrollX = scrollX + scrollMove;\r\n        if (newScrollX < 0) {\r\n          newScrollX = 0;\r\n        } else if (newScrollX > svgWidth) {\r\n          newScrollX = svgWidth;\r\n        }\r\n        setScrollX(newScrollX);\r\n        event.preventDefault();\r\n      } else if (ganttHeight) {\r\n        let newScrollY = scrollY + event.deltaY;\r\n        if (newScrollY < 0) {\r\n          newScrollY = 0;\r\n        } else if (newScrollY > ganttFullHeight - ganttHeight) {\r\n          newScrollY = ganttFullHeight - ganttHeight;\r\n        }\r\n        if (newScrollY !== scrollY) {\r\n          setScrollY(newScrollY);\r\n          event.preventDefault();\r\n        }\r\n      }\r\n\r\n      setIgnoreScrollEvent(true);\r\n    };\r\n\r\n    // subscribe if scroll is necessary\r\n    if (wrapperRef.current) {\r\n      wrapperRef.current.addEventListener(\"wheel\", handleWheel, {\r\n        passive: false,\r\n      });\r\n    }\r\n    return () => {\r\n      if (wrapperRef.current) {\r\n        wrapperRef.current.removeEventListener(\"wheel\", handleWheel);\r\n      }\r\n    };\r\n  }, [wrapperRef.current, scrollY, scrollX, ganttHeight, svgWidth, rtl]);\r\n\r\n  const handleScrollY = (event: SyntheticEvent<HTMLDivElement>) => {\r\n    if (scrollY !== event.currentTarget.scrollTop && !ignoreScrollEvent) {\r\n      setScrollY(event.currentTarget.scrollTop);\r\n    }\r\n    setIgnoreScrollEvent(false);\r\n  };\r\n\r\n  const handleScrollX = (event: SyntheticEvent<HTMLDivElement>) => {\r\n    if (scrollX !== event.currentTarget.scrollLeft && !ignoreScrollEvent) {\r\n      setScrollX(event.currentTarget.scrollLeft);\r\n    }\r\n    setIgnoreScrollEvent(false);\r\n  };\r\n\r\n  /**\r\n   * Handles arrow keys events and transform it to new scroll\r\n   */\r\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\r\n    event.preventDefault();\r\n    let newScrollY = scrollY;\r\n    let newScrollX = scrollX;\r\n    let isX = true;\r\n    switch (event.key) {\r\n      case \"Down\": // IE/Edge specific value\r\n      case \"ArrowDown\":\r\n        newScrollY += rowHeight;\r\n        isX = false;\r\n        break;\r\n      case \"Up\": // IE/Edge specific value\r\n      case \"ArrowUp\":\r\n        newScrollY -= rowHeight;\r\n        isX = false;\r\n        break;\r\n      case \"Left\":\r\n      case \"ArrowLeft\":\r\n        newScrollX -= columnWidth;\r\n        break;\r\n      case \"Right\": // IE/Edge specific value\r\n      case \"ArrowRight\":\r\n        newScrollX += columnWidth;\r\n        break;\r\n    }\r\n    if (isX) {\r\n      if (newScrollX < 0) {\r\n        newScrollX = 0;\r\n      } else if (newScrollX > svgWidth) {\r\n        newScrollX = svgWidth;\r\n      }\r\n      setScrollX(newScrollX);\r\n    } else {\r\n      if (newScrollY < 0) {\r\n        newScrollY = 0;\r\n      } else if (newScrollY > ganttFullHeight - ganttHeight) {\r\n        newScrollY = ganttFullHeight - ganttHeight;\r\n      }\r\n      setScrollY(newScrollY);\r\n    }\r\n    setIgnoreScrollEvent(true);\r\n  };\r\n\r\n  /**\r\n   * Task select event\r\n   */\r\n  const handleSelectedTask = (taskId: string) => {\r\n    const newSelectedTask = barTasks.find(t => t.id === taskId);\r\n    const oldSelectedTask = barTasks.find(\r\n      t => !!selectedTask && t.id === selectedTask.id\r\n    );\r\n    if (onSelect) {\r\n      if (oldSelectedTask) {\r\n        onSelect(oldSelectedTask, false);\r\n      }\r\n      if (newSelectedTask) {\r\n        onSelect(newSelectedTask, true);\r\n      }\r\n    }\r\n    setSelectedTask(newSelectedTask);\r\n  };\r\n  const handleExpanderClick = (task: Task) => {\r\n    if (onExpanderClick && task.hideChildren !== undefined) {\r\n      onExpanderClick({ ...task, hideChildren: !task.hideChildren });\r\n    }\r\n  };\r\n  const handlerCloseTooltip = () => {\r\n    setGanttEvent({ action: \"\" });\r\n    setSelectedTask(undefined);\r\n  };\r\n  const gridProps: GridProps = {\r\n    columnWidth,\r\n    svgWidth,\r\n    tasks: tasks,\r\n    rowHeight,\r\n    dates: dateSetup.dates,\r\n    todayColor,\r\n    rtl,\r\n  };\r\n  const calendarProps: CalendarProps = {\r\n    dateSetup,\r\n    locale,\r\n    viewMode,\r\n    headerHeight,\r\n    columnWidth,\r\n    fontFamily,\r\n    fontSize,\r\n    rtl,\r\n  };\r\n  const barProps: TaskGanttContentProps = {\r\n    tasks: barTasks,\r\n    dates: dateSetup.dates,\r\n    ganttEvent,\r\n    selectedTask,\r\n    rowHeight,\r\n    taskHeight,\r\n    columnWidth,\r\n    arrowColor,\r\n    timeStep,\r\n    fontFamily,\r\n    fontSize,\r\n    arrowIndent,\r\n    svgWidth,\r\n    rtl,\r\n    setGanttEvent,\r\n    setFailedTask,\r\n    setSelectedTask: handleSelectedTask,\r\n    onDateChange,\r\n    onProgressChange,\r\n    onDoubleClick,\r\n    onDelete,\r\n  };\r\n\r\n  const tableProps: TaskListProps = {\r\n    rowHeight,\r\n    rowWidth: listCellWidth,\r\n    fontFamily,\r\n    fontSize,\r\n    tasks: barTasks,\r\n    locale,\r\n    headerHeight,\r\n    scrollY,\r\n    ganttHeight,\r\n    horizontalContainerClass: styles.horizontalContainer,\r\n    selectedTask,\r\n    taskListRef,\r\n    setSelectedTask: handleSelectedTask,\r\n    onExpanderClick: handleExpanderClick,\r\n    TaskListHeader,\r\n    TaskListTable,\r\n  };\r\n  return (\r\n    <div>\r\n      <div\r\n        className={styles.wrapper}\r\n        onKeyDown={handleKeyDown}\r\n        tabIndex={0}\r\n        ref={wrapperRef}\r\n      >\r\n        {listCellWidth && <TaskList {...tableProps} />}\r\n        <TaskGantt\r\n          gridProps={gridProps}\r\n          calendarProps={calendarProps}\r\n          barProps={barProps}\r\n          ganttHeight={ganttHeight}\r\n          scrollY={scrollY}\r\n          scrollX={scrollX}\r\n        />\r\n        {ganttEvent.changedTask && (\r\n          <Tooltip\r\n            closeTooltip={() => handlerCloseTooltip()}\r\n            arrowIndent={arrowIndent}\r\n            rowHeight={rowHeight}\r\n            svgContainerHeight={svgContainerHeight}\r\n            svgContainerWidth={svgContainerWidth}\r\n            fontFamily={fontFamily}\r\n            fontSize={fontSize}\r\n            scrollX={scrollX}\r\n            scrollY={scrollY}\r\n            task={ganttEvent.changedTask}\r\n            headerHeight={headerHeight}\r\n            taskListWidth={taskListWidth}\r\n            TooltipContent={TooltipContent}\r\n            rtl={rtl}\r\n            svgWidth={svgWidth}\r\n          />\r\n        )}\r\n        <VerticalScroll\r\n          ganttFullHeight={ganttFullHeight}\r\n          ganttHeight={ganttHeight}\r\n          headerHeight={headerHeight}\r\n          scroll={scrollY}\r\n          onScroll={handleScrollY}\r\n          rtl={rtl}\r\n        />\r\n      </div>\r\n      <HorizontalScroll\r\n        svgWidth={svgWidth}\r\n        taskListWidth={taskListWidth}\r\n        scroll={scrollX}\r\n        rtl={rtl}\r\n        onScroll={handleScrollX}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n"],"names":["ViewMode","intlDTCache","getCachedDateTimeFormat","locString","opts","key","JSON","stringify","dtf","Intl","DateTimeFormat","addToDate","date","quantity","scale","newDate","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","console","log","startOfDate","scores","shouldReset","_scale","maxScore","indexOf","ganttDateRange","tasks","viewMode","newStartDate","start","newEndDate","task","end","Month","Week","getMonday","Day","QuarterDay","HalfDay","Hour","seedDates","startDate","endDate","currentDate","dates","push","getLocaleMonth","locale","bottomValue","month","format","replace","toLocaleUpperCase","getLocalDayOfWeek","weekday","day","getDay","diff","setDate","getWeekNumberISO8601","tmpDate","valueOf","dayNumber","firstThursday","setMonth","weekNumber","Math","ceil","toString","length","getDaysInMonth","year","TaskListHeaderDefault","headerHeight","fontFamily","fontSize","rowWidth","React","className","styles","ganttTable","style","ganttTable_Header","height","ganttTable_HeaderItem","minWidth","ganttTable_HeaderSeparator","marginTop","localeDateStringCache","toLocaleDateStringFactory","dateTimeOptions","lds","toLocaleDateString","TaskListTableDefault","rowHeight","onExpanderClick","useMemo","taskListWrapper","map","t","expanderSymbol","hideChildren","taskListTableRow","id","taskListCell","maxWidth","title","name","taskListNameWrapper","taskListExpander","taskListEmptyExpander","onClick","Tooltip","closeTooltip","rtl","svgContainerHeight","svgContainerWidth","scrollX","scrollY","arrowIndent","taskListWidth","TooltipContent","tooltipRef","useRef","useState","relatedY","setRelatedY","relatedX","setRelatedX","useEffect","current","tooltipHeight","offsetHeight","tooltipWidth","offsetWidth","newRelatedY","project","index","newRelatedX","x1","x2","tooltipLeftmostPoint","fullChartWidth","tooltipLowerPoint","handleClose","ref","tooltipDetailsContainer","tooltipDetailsContainerHidden","left","top","close","StandardTooltipContent","monthName","handleEdit","onEdit","tooltipDefaultContainer","tooltipArrow","tooltipTitle","taskTitle","tooltipDate","tooltipDescription","taskDescription","tooltipEditContainer","disabled","periodeType","width","viewBox","fill","xmlns","d","tooltipEditText","closeButton","cx","cy","r","y1","y2","stroke","strokeWidth","VerticalScroll","scroll","ganttHeight","ganttFullHeight","onScroll","scrollRef","scrollTop","marginLeft","TaskList","selectedTask","setSelectedTask","taskListRef","horizontalContainerClass","TaskListHeader","TaskListTable","horizontalContainerRef","headerProps","selectedTaskId","tableProps","convertToBarTasks","columnWidth","taskHeight","barCornerRadius","handleWidth","barProgressColor","barProgressSelectedColor","barBackgroundColor","barBackgroundSelectedColor","projectProgressColor","projectProgressSelectedColor","projectBackgroundColor","projectBackgroundSelectedColor","milestoneBackgroundColor","milestoneBackgroundSelectedColor","dateDelta","getTime","getTimezoneOffset","barTasks","i","convertToBarTask","dependencies","j","dependence","findIndex","value","barChildren","barTask","type","convertToMilestone","convertToBar","taskXCoordinateRTL","taskXCoordinate","typeInternal","progressWithByParams","progress","progressWidth","progressX","y","taskYCoordinate","undefined","backgroundColor","backgroundSelectedColor","progressColor","progressSelectedColor","x","rotatedHeight","xDate","round","taskX1","taskX2","getProgressPoint","taskY","point","join","GridBody","svgWidth","newTasks","gridRows","rowLines","gridRowLine","gridRow","now","tickX","ticks","today","startDay","startDayText","gridTick","strokeDasharray","lastTick","startDateX","birthDate","strokeLinecap","position","Grid","props","TopPartOfCalendar","xText","yText","calendarTopText","Calendar","dateSetup","getCalendarValuesForMonth","topValues","bottomValues","topDefaultHeight","calendarBottomText","topValue","x1Line","y1Line","y2Line","getCalendarValuesForWeek","weeksCount","getCalendarValuesForDay","getCalendarValuesForPartOfDay","hour","getCalendarValuesForHour","topPosition","calendarHeader","Arrow","taskFrom","taskTo","path","trianglePoints","drownPathAndTriangleRTL","drownPathAndTriangle","points","indexCompare","taskToEndPosition","taskFromEndPosition","taskFromHorizontalOffsetValue","taskToHorizontalOffsetValue","isKeyboardEvent","event","removeHiddenTasks","groupedTasks","filter","groupedTask","children","getChildren","taskList","taskChildren","reduce","concat","sortTasks","taskA","taskB","orderA","displayOrder","Number","MAX_VALUE","orderB","BarDisplay","isSelected","onMouseDown","getProcessColor","getBarColor","ry","rx","barBackground","Bar","isDateChangeable","onEventStart","barWrapper","tabIndex","e","BarProgressHandle","progressPoint","barHandle","BarSmall","isProgressChangeable","Milestone","transform","milestoneWrapper","milestoneBackground","Project","barColor","processColor","projectWith","projectLeftTriangle","projectRightTriangle","projectWrapper","projectBackground","projectTop","TaskItem","isDelete","taskItem","setTaskItem","onKeyDown","stopPropagation","onMouseEnter","onMouseLeave","onDoubleClick","onFocus","TaskGanttContent","ganttEvent","arrowColor","setGanttEvent","onDateChange","onProgressChange","onDelete","handleBarEventStart","action","changedTask","originalSelectedTask","result","error","child","isDisabled","TaskGantt","gridProps","calendarProps","barProps","ganttSVGRef","verticalGanttContainerRef","newBarProps","svg","scrollLeft","ganttVerticalContainer","dir","horizontalContainer","HorizontalScroll","margin","Gantt","listCellWidth","barFill","timeStep","todayColor","viewDate","onSelect","wrapperRef","setDateSetup","currentViewDate","setCurrentViewDate","setTaskListWidth","setSvgContainerWidth","setSvgContainerHeight","setBarTasks","failedTask","setFailedTask","setScrollY","setScrollX","ignoreScrollEvent","setIgnoreScrollEvent","filteredTasks","sort","newDates","reverse","prevStateTask","find","newTaskList","handleWheel","shiftKey","deltaX","scrollMove","deltaY","newScrollX","preventDefault","newScrollY","addEventListener","passive","removeEventListener","handleScrollY","currentTarget","handleScrollX","handleKeyDown","isX","handleSelectedTask","taskId","newSelectedTask","oldSelectedTask","handleExpanderClick","handlerCloseTooltip","wrapper"],"mappings":"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"}